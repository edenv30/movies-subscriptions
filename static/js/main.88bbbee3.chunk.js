(this["webpackJsonpmovies-subscriptions"]=this["webpackJsonpmovies-subscriptions"]||[]).push([[0],{114:function(e,t,a){e.exports=a(225)},119:function(e,t,a){},120:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),l=a.n(c),o=a(9),s=(a(119),a(4)),m=(a(120),a(15)),i=a(234),u=a(233),d=a(232),b=a(13),E=a(7),p=a.n(E),f=a(10),v=a(51),g=a.n(v);a(122),a(125);g.a.initializeApp({apiKey:"AIzaSyCN1VJ-36hCrlmFmMxyTrB7pXn1QubKLf0",authDomain:"movies-subscriptions.firebaseapp.com",databaseURL:"https://movies-subscriptions.firebaseio.com",projectId:"movies-subscriptions",storageBucket:"movies-subscriptions.appspot.com",messagingSenderId:"261996716763",appId:"1:261996716763:web:84505c38bea3ebad8d62fe",measurementId:"G-BR8W9C4BC3"});var N=g.a.auth(),h=g.a.firestore(),O={viewSubscriptions:!0,createSubscriptions:!1,updateSubscriptions:!1,deleteSubscriptions:!1,viewMovies:!0,createMovies:!1,updateMovies:!1,deleteMovies:!1},S=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=h.collection(t),c=h.batch(),l=r.doc(a),c.set(l,n),e.next=7,c.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=h.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,c=t.email,l=new Date,e.prev=9,e.next=12,n.set(Object(b.a)({displayName:r,email:c,createdAt:l},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=h.collection(t),r=h.batch(),c=n.doc(),"users"===t&&(a.id=c.id),"usersLogin"===t&&S("permissions",c.id,O),r.set(c,a),e.next=9,r.commit();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}(),w=function(e){return e.docs.map((function(e){var t=e.data().userName;return{id:e.id,userName:t}}))},k=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.createUserWithEmailAndPassword(a,n);case 3:return r=e.sent,c=r.user,e.next=7,y(c,{displayName:t});case 7:return e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=h.collection(t),r=h.batch(),c=n.doc(),r.set(c,a),e.next=7,r.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),C=function(e){return e.docs.map((function(e){var t=e.data(),a=t.displayName,n=t.email,r=t.createdAt;return{id:e.id,displayName:a,email:n,createdAt:r}}))},_=function(e){return e.docs.map((function(e){var t=e.data(),a=t.viewSubscriptions,n=t.createSubscriptions,r=t.updateSubscriptions,c=t.deleteSubscriptions,l=t.viewMovies,o=t.createMovies,s=t.updateMovies,m=t.deleteMovies;return{id:e.id,viewSubscriptions:a,createSubscriptions:n,updateSubscriptions:r,deleteSubscriptions:c,viewMovies:l,createMovies:o,updateMovies:s,deleteMovies:m}}))},M=function(e){return e.docs.map((function(e){var t=e.data(),a=t.name,n=t.email,r=t.city;return{id:e.id,name:a,email:n,city:r}}))},I=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n,r){var c,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={displayName:a,id:t,email:n,createdAt:r},e.prev=1,l=h.collection("users").doc(t),(o=h.batch()).update(l,c),e.next=7,o.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r,c,l,o,s,m,i,u,d,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.viewSubscriptions,r=a.createSubscriptions,c=a.updateSubscriptions,l=a.deleteSubscriptions,o=a.viewMovies,s=a.createMovies,m=a.updateMovies,i=a.deleteMovies,u={id:t,viewSubscriptions:n,createSubscriptions:r,updateSubscriptions:c,deleteSubscriptions:l,viewMovies:o,createMovies:s,updateMovies:m,deleteMovies:i},e.prev=2,d=h.collection("permissions").doc(t),(b=h.batch()).update(d,u),e.next=8,b.commit();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=h.collection("users").doc(t),n=h.collection("permissions").doc(t),(r=h.batch()).delete(a),r.delete(n),e.next=8,r.commit();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n,r,c){var l,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={name:a,image:n,premiered:r,genres:c},e.prev=1,o=h.collection("movies").doc(t),(s=h.batch()).update(o,l),e.next=7,s.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),U=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=h.collection(a).doc(t),(r=h.batch()).delete(n),e.next=6,r.commit();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n,r,c){var l,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={name:a,email:n,city:r},e.prev=1,o=h.collection(c).doc(t),(s=h.batch()).update(o,l),e.next=7,s.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=h.collection(a).doc(t),(r=h.batch()).delete(n),e.next=6,r.commit();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=h.collection(t).doc(a),c=h.batch(),e.next=5,r.get();case 5:return(l=e.sent).exists?(console.log("Document data:",l.data()),c.update(r,n)):(console.log("No such document!"),c.set(r,n)),e.next=9,c.commit();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a,n){return e.apply(this,arguments)}}(),B=function(e){return e.docs.map((function(e){var t=e.data().movies;return{id:e.id,movies:t}}))},F=(g.a,a(11)),G=function(e){var t=e.loggedIn,a=Object(F.d)((function(e){return e.user.currentUser}));return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(i.a,{fixed:"top",expand:"lg",variant:"dark",bg:"dark"},r.a.createElement(i.a.Brand,null,t?a?a.displayName:null:"User"),r.a.createElement(i.a.Brand,{href:"mainpage"}),r.a.createElement(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(i.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(u.a,{className:"mr-auto"},r.a.createElement(u.a.Link,{href:"#home"},"Welcome to Movies-Subscriptions")),r.a.createElement(d.a,{inline:!0},t?r.a.createElement("div",{className:"btn btn-outline-warning",onClick:function(){N.signOut()}},"SIGN OUT"):r.a.createElement(o.b,{to:"signin",className:"btn btn-outline-warning"},"SIGN IN"))))))},H={LOG_IN_USER:"LOG_IN_USER",SET_EMAIL_PASS_LOG_IN:"SET_EMAIL_PASS_LOG_IN",SET_USER_SIGNUP:"SET_USER_SIGNUP",GET_USERS_LIST:"GET_USERS_LIST",GET_PERMISSIONS_USERS:"GET_PERMISSIONS_USERS",SET_USERS_WITH_PERMISSIONS:"SET_USERS_WITH_PERMISSIONS",GET_USERS_LOGIN_LIST:"GET_USERS_LOGIN_LIST"},V=function(e){return{type:H.SET_EMAIL_PASS_LOG_IN,payload:e}},Y=function(e){return{type:H.GET_USERS_LOGIN_LIST,payload:e}},W=Object(F.b)((function(e){return{loggedIn:e.user.loggedIn}}),(function(e){return{setUserLoginEmailPass:function(t){return e(V(t))}}}))((function(e){e.setUserLoginEmailPass;var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(""),i=Object(s.a)(m,2),u=i[0],d=i[1],b=function(e){e.preventDefault(),function(e,t){N.signInWithEmailAndPassword(e,t)}(c,u)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign In "),r.a.createElement("form",{className:"text-center"},r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"inputEmail1"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"inputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"inputPassword1"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword1",placeholder:"Password",onChange:function(e){return d(e.target.value)}})),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return b(e)}},"Sign In"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"New User?"),r.a.createElement(o.b,{to:"signupusername",className:"badge badge-warning"}," Create Account"),r.a.createElement("br",null),r.a.createElement("br",null))))})),z=function(){return r.a.createElement("div",null,r.a.createElement(W,null))},K=Object(F.b)(null,(function(e){return{setUserLoginEmailPass:function(t){return e(V(t))}}}))((function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(s.a)(l,2),m=o[0],i=o[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),b=d[0],E=d[1],v=Object(n.useState)(""),g=Object(s.a)(v,2),N=g[0],h=g[1],O=Object(n.useState)(!1),S=Object(s.a)(O,2),y=S[0],j=S[1],w=function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a?c(n):"userPassword"===a?i(n):"userconfirmPassword"===a?E(n):"displayName"===a&&h(n)},x=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m===b){e.next=4;break}return alert("password don't match!"),e.abrupt("return");case 4:return e.prev=4,e.next=7,k(N,a,m);case 7:n=e.sent,j(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){y&&(c(""),i(""),E(""),h(""),j(!1))}),[y]),r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign Up "),r.a.createElement("h3",null,"Create an account"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"displayName"},"Display Name:"),r.a.createElement("input",{className:"form-control",id:"displayName",name:"displayName",onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userEmail"},"Email:"),r.a.createElement("input",{className:"form-control",id:"userEmail",name:"userEmail","aria-describedby":"emailHelp",onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userPassword"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"userPassword",name:"userPassword",onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userPassword"},"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"userconfirmPassword",name:"userconfirmPassword",onChange:function(e){return w(e)}})),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return x(e)}},"Sign up")," ",r.a.createElement("br",null),r.a.createElement("br",null)))})),J=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(F.d)((function(e){return e.user.usersLoginList})),o=Object(F.c)(),i=Object(n.useState)(!1),u=Object(s.a)(i,2),d=u[0],b=u[1],E=Object(n.useState)(!1),v=Object(s.a)(E,2),g=v[0],N=v[1];Object(n.useEffect)((function(){h.collection("usersLogin").onSnapshot(function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=w(t),o(Y(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var O=function(e){e.preventDefault(),N(!0);var t=function(){var e=!1;return console.log(l),l.forEach((function(t){t.userName===a&&(console.log(t.userName,a),e=!0)})),e}();b(t)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign Up - User Name "),r.a.createElement("h3",null,"Create an account"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"displayName"},"User Name from admin"),r.a.createElement("input",{className:"form-control",onChange:function(e){return c(e.target.value.toLowerCase())}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return O(e)}},"Submit")," ",r.a.createElement("br",null),r.a.createElement("br",null),(console.log(g,d),g?d?r.a.createElement(m.a,{to:"signup"}):alert("User name doesn't exist !"):null))))},Q={SET_MOVIES_FROM_FIRE_STORE:"SET_MOVIES_FROM_FIRE_STORE",ADD_MOVIE:"ADD_MOVIE"},X=function(){var e=Object(F.c)();return Object(n.useEffect)((function(){h.collection("movies").onSnapshot(function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.docs.map((function(e){var t=e.data(),a=t.name,n=t.genres,r=t.image,c=t.premiered;return{routeName:encodeURI(a.toLowerCase()),id:e.id,name:a,genres:n,image:r,premiered:c}})),e({type:Q.SET_MOVIES_FROM_FIRE_STORE,payload:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Movies - Subscriptions: Main Page"),r.a.createElement("div",null,r.a.createElement(o.b,{to:"movies",className:"btn btn-outline-warning"},"Movies"),r.a.createElement(o.b,{to:"subscriptions",className:"btn btn-outline-warning"},"Subscriptions"),r.a.createElement(o.b,{to:"manageusers",className:"btn btn-outline-warning"},"Users Management"),r.a.createElement(o.b,{to:"signin",className:"btn btn-outline-warning"},"Log Out")))},q=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Manage Users"),r.a.createElement(o.b,{to:"allusers",className:"btn btn-outline-warning"},"All users"),r.a.createElement(o.b,{to:"adduser",className:"btn btn-outline-warning"},"Add user"),r.a.createElement(o.b,{to:"addusername",className:"btn btn-outline-warning"},"Add user By User Name"))},Z=a(105),$=a(231),ee=function(e){var t=e.searchField,a=Object(F.d)((function(e){return e.movies.movies})),c=Object(n.useState)(a),l=Object(s.a)(c,2),m=l[0],i=l[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),b=d[0],E=d[1],p=function(){E(!1)};Object(n.useEffect)((function(){try{if(t){var e=a.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));i(e)}}catch(n){console.log(n)}}),[t]);return r.a.createElement("div",null,r.a.createElement("div",{className:"container row mt-5 justify-content-center"},m.map((function(e){return r.a.createElement("div",{key:e.id,className:"card card-custom mx-2 mb-3",style:{width:"18rem",textAlign:"center",background:"black"}},r.a.createElement("img",{src:e.image,className:"card-img-top",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text"},"genres:"),r.a.createElement("ul",{style:{listStyleType:"none"}},e.genres.map((function(e,t){return r.a.createElement("li",{key:t}," ",e," ")}))),r.a.createElement(o.b,{to:{pathname:"/editmovie",state:{movie:e}},className:"btn btn-danger",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},"Edit"),r.a.createElement(Z.a,{className:"btn btn-danger",onClick:function(e){E(!0)}},"Delete"),r.a.createElement($.a,{show:b,onHide:p},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement($.a.Header,{closeButton:!0},r.a.createElement($.a.Title,null,"Delete Movie")),r.a.createElement($.a.Body,null,"Are you sure you want to delete the movie ",e.name,"?"),r.a.createElement($.a.Footer,null,r.a.createElement(Z.a,{variant:"danger",onClick:function(t){return function(e,t){e.preventDefault(),U(t,"movies"),p()}(t,e.id)}},"Yes"),r.a.createElement(Z.a,{variant:"secondary",onClick:p},"No"))))))}))))},te=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(F.d)((function(e){return e.movies.movies}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Movies"),r.a.createElement(o.b,{to:"allmovies",className:"btn btn-outline-warning"},"All movies"),r.a.createElement(o.b,{to:"addmovie",className:"btn btn-outline-warning"},"Add movie"),r.a.createElement("br",null),r.a.createElement("br",null),l?r.a.createElement("div",null,"Find movie: ",r.a.createElement("input",{type:"search",placeholder:"Search Movie",onChange:function(e){return c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ee,{searchField:a})):null,r.a.createElement("div",null))},ae={SET_MEMBERS_FROM_FIREBASE:"SET_MEMBERS_FROM_FIREBASE",SET_MOVIES_BY_MEMBER_FROM_FIREBASE:"SET_MOVIES_BY_MEMBER_FROM_FIREBASE"},ne=function(){var e=Object(F.c)();return Object(n.useEffect)((function(){h.collection("members").onSnapshot(function(){var t=Object(f.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=M(a),e({type:ae.SET_MEMBERS_FROM_FIREBASE,payload:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Movies - Subscriptions: Subscriptions"),r.a.createElement(o.b,{to:"allmembers",className:"btn btn-outline-warning"},"All Members"),r.a.createElement(o.b,{to:"addmember",className:"btn btn-outline-warning"},"Add Member"))},re=a(107),ce=a.n(re),le=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(s.a)(l,2),i=o[0],u=o[1],d=Object(n.useState)(""),b=Object(s.a)(d,2),E=b[0],v=b[1],g=Object(n.useState)(new Date),N=Object(s.a)(g,2),h=N[0],O=N[1],S=Object(n.useState)({}),y=Object(s.a)(S,2),j=y[0],w=y[1],k=Object(n.useState)(!1),C=Object(s.a)(k,2),_=C[0],M=C[1],I=Object(F.d)((function(e){return e.movies.movies})),R=Object(F.c)(),T=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),E&&(n=E,ce.a.isURL(n))?a&&i&&E&&h?(w({name:a,genres:i,image:E,premiered:h}),M(!0)):alert("You must fill in all the fields!"):alert("You must insert a URL");case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("movies",j);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0!==Object.keys(j).length&&(R(function(e){return{type:Q.ADD_MOVIE,payload:e}}(j)),function(){e.apply(this,arguments)}())}),[j]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Movies "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new movie")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:a,onChange:function(e){return function(e){var t=!1;I.map((function(a){a.name.toLowerCase()===e.target.value.toLowerCase()&&(t=!0)})),t?alert("The movie already exist"):c(e.target.value)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Genres"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:i,onChange:function(e){return function(e){var t=e.target.value.split(",");u(t)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Image Url "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:E,onChange:function(e){return v(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Premiered"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"date",value:h,onChange:function(e){return O(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add movie",onClick:function(e){return T(e)}}),r.a.createElement("button",{type:"submit",className:"btn btn-secondary",onClick:function(e){return function(e){e.preventDefault(),c(""),u([]),v(""),O(new Date),M(!0)}(e)}},"Cancel"),_?r.a.createElement(m.a,{to:"allmovies"}):null)))))))))},oe=a(230),se=a(111),me=function(){var e=Object(m.g)().state.movie,t=Object(n.useState)(e.name),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(e.image),u=Object(s.a)(i,2),d=u[0],b=u[1],E=Object(n.useState)(e.premiered),p=Object(s.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)(e.genres),N=Object(s.a)(g,2),h=N[0],O=(N[1],Object(n.useState)(!1)),S=Object(s.a)(O,2),y=S[0],j=S[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Movies"),r.a.createElement("h4",null,"Edit movie: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Movie Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Iamge Url: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:d,onChange:function(e){return b(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Premiered: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"date",value:f,onChange:function(e){return v(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Genres: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(oe.a,{className:"btn btn-danger btn-sm rounded-0",title:"See all",size:"sm",variant:"Warning"},h.map((function(e,t){return r.a.createElement(se.a.Item,{key:t,eventKey:t},e)}))),r.a.createElement(Z.a,{className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Add",size:"sm"},r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault(),L(e.id,c,d,f,h),alert("Details changed successfully"),j(!0)}(t)}}),r.a.createElement(o.b,{to:"allmovies",className:"btn btn-secondary"},"Cancel"),y?r.a.createElement(m.a,{to:"allmovies"}):null)))))))))},ie=a(32),ue=function(e){var t,a,c=e.user,l=Object(n.useState)(!1),m=Object(s.a)(l,2),i=m[0],u=m[1],d=function(){u(!1)};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"card text-white bg-dark mb-3",style:{maxWidth:"18rem"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"}),r.a.createElement("span",null," ",c.email," ")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},c.displayName),r.a.createElement("p",{className:"card-text"},"Created data:  ",r.a.createElement("br",null)),r.a.createElement(oe.a,(t={style:"default",size:"small"},Object(ie.a)(t,"style",{maxHeight:"28px"}),Object(ie.a)(t,"title","Permissions"),Object(ie.a)(t,"key",1),Object(ie.a)(t,"id","dropdown-size-small"),Object(ie.a)(t,"variant","secondary"),t),r.a.createElement("ul",{className:"card-body"},"Permissions:",(a=c.permissions,Object.keys(a[0]).filter((function(e){return!0===a[0][e]}))).map((function(e,t){return r.a.createElement("li",{key:t},e)}))))),r.a.createElement("div",{className:"card-footer bg-transparent"},r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(o.b,{to:{pathname:"/edituser",state:{user:c}},className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},r.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(Z.a,{className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:function(e){u(!0)}},r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))),r.a.createElement($.a,{show:i,onHide:d},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement($.a.Header,{closeButton:!0},r.a.createElement($.a.Title,null,"Delete User")),r.a.createElement($.a.Body,null,"Are you sure you want to delete the user ",c.displayName,"?"),r.a.createElement($.a.Footer,null,r.a.createElement(Z.a,{variant:"danger",onClick:function(e){return function(e){e.preventDefault(),d(),T(c.id)}(e)}},"Yes"),r.a.createElement(Z.a,{variant:"secondary",onClick:d},"No")))))))},de=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(s.a)(l,2),m=o[0],i=o[1],u=Object(F.c)(),d=Object(F.d)((function(e){return e.user.users}));return Object(n.useEffect)((function(){h.collection("users").onSnapshot(function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=C(t),c(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h.collection("permissions").onSnapshot(function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=_(t),i(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){a.map((function(e){var t=m.filter((function(t){return e.id===t.id}));e.permissions=t})),u(function(e){return{type:H.SET_USERS_WITH_PERMISSIONS,payload:e}}(a))}),[m]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Users List: "),r.a.createElement("div",{className:"card-group justify-content-center"},d?d.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(ue,{user:e}))})):null))},be={vs:"viewSubscriptions",cs:"createSubscriptions",us:"updateSubscriptions",ds:"deleteSubscriptions",vmovies:"viewMovies",cm:"createMovies",um:"updateMovies",dm:"deleteMovies"},Ee=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),u=i[0],b=i[1],E=Object(n.useState)([]),p=Object(s.a)(E,2),f=(p[0],p[1],Object(n.useState)(!1)),v=Object(s.a)(f,2),g=v[0],N=v[1];return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Users "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new user")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return c(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",onChange:function(e){return b(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Permissions"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(d.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(d.a.Check,{type:"checkbox",id:be.vs,label:be.vs}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.cs,label:be.cs}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.us,label:be.us}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.ds,label:be.ds}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.vmovies,label:be.vmovies}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.cm,label:be.cm}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.um,label:be.um}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.dm,label:be.dm})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add user",onClick:function(e){return function(e){if(e.preventDefault(),a&&u){var t=new Date;j("users",{displayName:a,email:u,createdAt:t}),alert("Details saved successfully"),N(!0)}else alert("You muse insert name & email"),c(""),b("")}(e)}}),r.a.createElement(o.b,{to:"manageuserss",className:"btn btn-secondary"},"Cancel"),g?r.a.createElement(m.a,{to:"manageusers"}):null)))))))))},pe=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(s.a)(l,2),u=i[0],d=i[1],b=Object(F.c)(),E=Object(F.d)((function(e){return e.user.usersLoginList}));Object(n.useEffect)((function(){h.collection("usersLogin").onSnapshot(function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=w(t),b(Y(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var v=function(e){if(e.preventDefault(),a)try{var t=new Date;(function(){var e=!0;return E.forEach((function(t){t.userName===a&&(e=!1)})),e})()?(j("usersLogin",{userName:a,createdAt:t}),alert("Details saved successfully"),d(!0)):alert("The user name ".concat(a," already exist !"))}catch(n){console.log(n)}else alert("You must insert user name"),c("")};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Users "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new user")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"User Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return c(e.target.value.toLowerCase())}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add user",onClick:function(e){return v(e)}}),r.a.createElement(o.b,{to:"manageusers",className:"btn btn-secondary"},"Cancel"),u?r.a.createElement(m.a,{to:"manageusers"}):null)))))))))},fe=function(){var e=Object(m.g)().state.user,t=Object(n.useState)(e.displayName),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(e.email),u=Object(s.a)(i,2),b=u[0],E=u[1],p=Object(n.useState)(e.permissions),f=Object(s.a)(p,2),v=f[0],g=f[1],N=Object(n.useState)(v[0][be.vs]),h=Object(s.a)(N,2),O=h[0],S=h[1],y=Object(n.useState)(v[0][be.cs]),j=Object(s.a)(y,2),w=j[0],k=j[1],x=Object(n.useState)(v[0][be.us]),C=Object(s.a)(x,2),_=C[0],M=C[1],T=Object(n.useState)(v[0][be.ds]),L=Object(s.a)(T,2),U=L[0],A=L[1],D=Object(n.useState)(v[0][be.vmovies]),P=Object(s.a)(D,2),B=P[0],F=P[1],G=Object(n.useState)(v[0][be.cm]),H=Object(s.a)(G,2),V=H[0],Y=H[1],W=Object(n.useState)(v[0][be.um]),z=Object(s.a)(W,2),K=z[0],J=z[1],Q=Object(n.useState)(v[0][be.dm]),X=Object(s.a)(Q,2),q=X[0],Z=X[1],$=Object(n.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],ne=function(e,t,a,n){e(t.target.checked),v[0][a]=t.target.checked,g(v)},re=function(e){e.target.id===be.vs?ne(S,e,be.vs):e.target.id===be.cs?ne(k,e,be.cs):e.target.id===be.us?ne(M,e,be.us):e.target.id===be.ds?ne(A,e,be.ds):e.target.id===be.vmovies?ne(F,e,be.vmovies):e.target.id===be.cm?ne(Y,e,be.cm):e.target.id===be.um?ne(J,e,be.um):e.target.id===be.dm&&ne(Z,e,be.dm)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement("h4",null,"Edit user: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"User Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",value:b,onChange:function(e){return E(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Permissions"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(d.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(d.a.Check,{type:"checkbox",id:be.vs,label:be.vs,checked:O,onChange:function(e){return re(e)}}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.cs,label:be.cs,checked:w,onChange:function(e){return re(e)}}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.us,label:be.us,checked:_,onChange:function(e){return re(e)}}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.ds,label:be.ds,checked:U,onChange:function(e){return re(e)}}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.vmovies,label:be.vmovies,checked:B,onChange:function(e){return re(e)}}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.cm,label:be.cm,checked:V,onChange:function(e){return re(e)}}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.um,label:be.um,checked:K,onChange:function(e){return re(e)}}),r.a.createElement(d.a.Check,{type:"checkbox",id:be.dm,label:be.dm,checked:q,onChange:function(e){return re(e)}})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault(),I(e.id,c,b,e.createdAt),R(e.id,v[0]),alert("Details changed successfully"),ae(!0)}(t)}}),r.a.createElement(o.b,{to:"allusers",className:"btn btn-secondary"},"Cancel"),te?r.a.createElement(m.a,{to:"allusers"}):null)))))))))},ve=a(67),ge=a(235),Ne=function(e){var t=e.member,a=Object(F.d)((function(e){return e.movies.movies})),c=Object(F.d)((function(e){return e.members.moviesByMember})),l=Object(n.useState)([]),m=Object(s.a)(l,2),i=m[0],b=m[1],E=Object(n.useState)([]),p=Object(s.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)(!1),N=Object(s.a)(g,2),h=N[0],O=N[1],S=Object(n.useState)("/details"),y=Object(s.a)(S,2),j=y[0],w=y[1],k=Object(n.useState)(!1),x=Object(s.a)(k,2),C=x[0],_=x[1],M=Object(n.useState)(""),I=Object(s.a)(M,2),R=I[0],T=I[1],L=Object(n.useState)(""),U=Object(s.a)(L,2),A=U[0],B=U[1],G=Object(n.useState)(""),H=Object(s.a)(G,2),V=H[0],Y=H[1],W=function(){O(!1)},z=function(e,t,a){e.preventDefault(),T(t),Y(a)};Object(n.useEffect)((function(){if(c.length>0){var e=c.filter((function(e){return e.id===t.id}));b(e[0].movies)}}),[c]),Object(n.useEffect)((function(){if(R&&A){var e={movieId:R,date:A};b([].concat(Object(ve.a)(i),[e]))}}),[R,A]);var K=function(){var e=a.filter((function(e){return 0==i.filter((function(t){return t.movieId==e.id})).length}));v(e)};return r.a.createElement("div",null,r.a.createElement(ge.a,{bg:"dark"},r.a.createElement(ge.a.Header,{bg:"secondary"},r.a.createElement(u.a,{variant:"tabs",defaultActiveKey:"#details",activeKey:"/details",onSelect:function(e){return w(e)}},r.a.createElement(u.a.Item,null,r.a.createElement(u.a.Link,{href:"/details"},"Member Details")),r.a.createElement(u.a.Item,null,r.a.createElement(u.a.Link,{eventKey:"watched"},"Movies watched")))),"/details"===j?r.a.createElement("div",null,r.a.createElement(ge.a.Body,null,r.a.createElement(ge.a.Title,null,t.name),r.a.createElement(ge.a.Text,null,"Email: ",t.email,r.a.createElement("br",null),"City: ",t.city)),r.a.createElement(ge.a.Footer,null,r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(o.b,{to:{pathname:"/editmember",state:{member:t}},className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},r.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(Z.a,{className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:function(e){O(!0)}},r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))),r.a.createElement($.a,{show:h,onHide:W},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement($.a.Header,{closeButton:!0},r.a.createElement($.a.Title,null,"Delete Member")),r.a.createElement($.a.Body,null,"Are you sure you want to delete the user ",t.name,"?"),r.a.createElement($.a.Footer,null,r.a.createElement(Z.a,{variant:"danger",onClick:function(e){return function(e){e.preventDefault(),W(),D(t.id,"members"),D(t.id,"subscriptions")}(e)}},"Yes"),r.a.createElement(Z.a,{variant:"secondary",onClick:W},"No")))))):r.a.createElement("div",null,r.a.createElement(ge.a.Body,null,r.a.createElement(ge.a.Title,null,"Movies watched"),r.a.createElement(ge.a.Text,{as:"ul"},i?i.map((function(e,t){var n="";a.filter((function(t){return t.id===e.movieId&&(n=t.name),n}));return r.a.createElement("li",{key:t},"Movie : ",n," ",r.a.createElement("br",null),"Date: ",e.date)})):null)),r.a.createElement(ge.a.Footer,null,r.a.createElement(Z.a,{className:"btn btn-danger",onClick:function(e){!function(e){e.preventDefault(),_(!C),a&&i&&K()}(e)}},"Subscribe to new movie "),C?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(se.a,null,r.a.createElement(se.a.Toggle,{variant:"secondary",id:"dropdown-basic"},V?"".concat(V):"Movies List"),r.a.createElement(se.a.Menu,null,f.length>0?f.map((function(e,t){return r.a.createElement(se.a.Item,{key:t,variant:"warning",className:"btn btn-secondary",onClick:function(t){return z(t,e.id,e.name)}},e.name)})):a.map((function(e,t){return r.a.createElement(se.a.Item,{key:t,variant:"warning",className:"btn btn-secondary",onClick:function(t){return z(t,e.id,e.name)}},e.name)})))),r.a.createElement(d.a.Group,{controlId:"dw"},r.a.createElement(d.a.Label,null,"Select Date watched:"),r.a.createElement(d.a.Control,{className:"btn btn-secondary",type:"date",name:"dw",placeholder:"Date watched",onChange:function(e){return B(e.target.value)}})),r.a.createElement(Z.a,{className:"btn btn-danger",onClick:function(e){if(e.preventDefault(),R&&A){var a=t.id;P("subscriptions",a,{movies:i}),console.log(i),alert("".concat(t.name," member is subscribed to ").concat(V," movie"))}else alert("You must choose movie & date"),T(""),B("")}},"Subscribe")):null))))},he=function(){var e=Object(F.d)((function(e){return e.members.members})),t=Object(F.c)();return Object(n.useEffect)((function(){h.collection("subscriptions").onSnapshot(function(){var e=Object(f.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=B(a),t({type:ae.SET_MOVIES_BY_MEMBER_FROM_FIREBASE,payload:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Members List: "),r.a.createElement("div",{className:"card-group justify-content-center"},e.map((function(e,t){return r.a.createElement(Ne,{key:t,member:e})}))))},Oe=function(){var e=Object(m.g)().state.member,t=Object(n.useState)(e.name),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(e.email),u=Object(s.a)(i,2),d=u[0],b=u[1],E=Object(n.useState)(e.city),p=Object(s.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)(!1),N=Object(s.a)(g,2),h=N[0],O=N[1];return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"Members"),r.a.createElement("h4",null,"Edit member: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Member Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",value:d,onChange:function(e){return b(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"City"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:f,onChange:function(e){return v(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault(),A(e.id,c,d,f,"members"),alert("Details changed successfully"),O(!0)}(t)}}),r.a.createElement(o.b,{to:"allmembers",className:"btn btn-secondary"},"Cancel"),h?r.a.createElement(m.a,{to:"allmembers"}):null)))))))))},Se=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),u=i[0],d=i[1],b=Object(n.useState)(""),E=Object(s.a)(b,2),p=E[0],f=E[1],v=Object(n.useState)(!1),g=Object(s.a)(v,2),N=g[0],h=g[1],O=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Members "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new member")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return c(O(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",onChange:function(e){return d(O(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"City"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return f(O(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add member",onClick:function(e){return function(e){e.preventDefault(),a&&u&&p?(j("members",{name:a,email:u,city:p}),alert("Details saved successfully"),h(!0)):(alert("You muse insert name & email & city"),c(""),d(""),f(""))}(e)}}),r.a.createElement(o.b,{to:"allmembers",className:"btn btn-secondary"},"Cancel"),N?r.a.createElement(m.a,{to:"allmembers"}):null)))))))))};a(79);var ye=Object(F.b)((function(e){return{loggedIn:e.user.loggedIn}}),(function(e){return{setUserLoggenIn:function(t){return e({type:H.LOG_IN_USER,payload:t})},setUserLoginEmailPass:function(t){return e(V(t))}}}))((function(e){var t=e.loggedIn,a=e.setUserLoggenIn,c=e.setUserLoginEmailPass,l=Object(n.useState)([]),o=Object(s.a)(l,2);return o[0],o[1],Object(n.useEffect)((function(){var e,t,n=(e=a,t=c,N.onAuthStateChanged(function(){var a=Object(f.a)(p.a.mark((function a(n){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n){a.next=9;break}return e(!0),a.next=4,y(n);case 4:a.sent.onSnapshot((function(e){t(Object(b.a)({id:e.id},e.data()))})),console.log("The user is logged in"),a.next=12;break;case 9:e(!1),t(n),console.log("The user is not logged in");case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()));return function(){n()}}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(G,{loggedIn:t}),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/signup",component:K}),r.a.createElement(m.b,{path:"/signupusername",component:J}),r.a.createElement(m.b,{path:"/mainpage",component:X}),r.a.createElement(m.b,{path:"/signin",component:z}),r.a.createElement(m.b,{path:"/manageusers",component:q}),r.a.createElement(m.b,{path:"/allusers",component:de}),r.a.createElement(m.b,{path:"/adduser",component:Ee}),r.a.createElement(m.b,{path:"/addusername",component:pe}),r.a.createElement(m.b,{path:"/edituser",component:fe}),r.a.createElement(m.b,{path:"/movies",component:te}),r.a.createElement(m.b,{path:"/allmovies",component:ee}),r.a.createElement(m.b,{path:"/editmovie",component:me}),r.a.createElement(m.b,{path:"/addmovie",component:le}),r.a.createElement(m.b,{path:"/subscriptions",component:ne}),r.a.createElement(m.b,{path:"/allmembers",component:he}),r.a.createElement(m.b,{path:"/editmember",component:Oe}),r.a.createElement(m.b,{path:"/addmember",component:Se})),t?r.a.createElement(m.a,{from:"/signin",to:"/mainpage"}):r.a.createElement(m.a,{to:"signin"}))})),je=a(34),we=a(109),ke=a.n(we),xe={currentUser:null,loggedIn:!1,error:null,users:[],usersPermissions:[],usersLoginList:[]},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.LOG_IN_USER:return Object(b.a)(Object(b.a)({},e),{},{loggedIn:t.payload});case H.SET_EMAIL_PASS_LOG_IN:return Object(b.a)(Object(b.a)({},e),{},{currentUser:t.payload});case H.GET_USERS_LIST:return Object(b.a)(Object(b.a)({},e),{},{users:t.payload});case H.GET_PERMISSIONS_USERS:return Object(b.a)(Object(b.a)({},e),{},{usersPermissions:t.payload});case H.SET_USERS_WITH_PERMISSIONS:return Object(b.a)(Object(b.a)({},e),{},{users:t.payload});case H.GET_USERS_LOGIN_LIST:return Object(b.a)(Object(b.a)({},e),{},{usersLoginList:t.payload});default:return e}},_e={movies:[]},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q.SET_MOVIES_FROM_FIRE_STORE:return Object(b.a)(Object(b.a)({},e),{},{movies:t.payload});case Q.ADD_MOVIE:return Object(b.a)(Object(b.a)({},e),{},{movies:[].concat(Object(ve.a)(e.movies),[t.payload])});default:return e}},Ie={members:[],moviesByMember:[]},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.SET_MEMBERS_FROM_FIREBASE:return Object(b.a)(Object(b.a)({},e),{},{members:t.payload});case ae.SET_MOVIES_BY_MEMBER_FROM_FIREBASE:return Object(b.a)(Object(b.a)({},e),{},{moviesByMember:t.payload});default:return e}},Te=Object(je.c)({user:Ce,movies:Me,members:Re}),Le=[ke.a],Ue=Object(je.d)(Te,je.a.apply(void 0,Le));l.a.render(r.a.createElement(F.a,{store:Ue},r.a.createElement(o.a,null,r.a.createElement(ye,null))),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.88bbbee3.chunk.js.map