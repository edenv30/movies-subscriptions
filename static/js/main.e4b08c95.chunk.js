(this["webpackJsonpmovies-subscriptions"]=this["webpackJsonpmovies-subscriptions"]||[]).push([[0],{105:function(e,t,a){e.exports=a(202)},110:function(e,t,a){},111:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),s=a(9),o=(a(110),a(111),a(15)),i=a(210),m=a(211),u=a(209),d=a(12),b=a(8),E=a.n(b),p=a(11),f=a(49),v=a.n(f);a(113),a(117);v.a.initializeApp({apiKey:"AIzaSyCN1VJ-36hCrlmFmMxyTrB7pXn1QubKLf0",authDomain:"movies-subscriptions.firebaseapp.com",databaseURL:"https://movies-subscriptions.firebaseio.com",projectId:"movies-subscriptions",storageBucket:"movies-subscriptions.appspot.com",messagingSenderId:"261996716763",appId:"1:261996716763:web:84505c38bea3ebad8d62fe",measurementId:"G-BR8W9C4BC3"});var g=v.a.auth(),N=v.a.firestore(),h={viewSubscriptions:!0,createSubscriptions:!1,updateSubscriptions:!1,deleteSubscriptions:!1,viewMovies:!0,createMovies:!1,updateMovies:!1,deleteMovies:!1},O=function(){var e=Object(p.a)(E.a.mark((function e(t,a,n){var r,c,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=N.collection(t),c=N.batch(),l=r.doc(a),c.set(l,n),e.next=7,c.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(E.a.mark((function e(t,a){var n,r,c,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=N.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=18;break}return r=t.displayName,c=t.email,l=new Date,O("permissions",t.uid,h),e.prev=10,e.next=13,n.set(Object(d.a)({displayName:r,email:c,createdAt:l},a));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.log("error creating user",e.t0.message);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(E.a.mark((function e(t,a){var n,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N.collection(t),r=N.batch(),c=n.doc(),"users"===t&&(a.id=c.id),"usersLogin"===t&&O("permissions",c.id,h),r.set(c,a),e.next=9,r.commit();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}(),y=function(e){return e.docs.map((function(e){var t=e.data(),a=t.userName,n=t.signup;return{id:e.id,userName:a,signup:n}}))},w=function(){var e=Object(p.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N.collection(t).doc(a),(r=N.batch()).update(n,{signup:!0}),e.next=6,r.commit();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(E.a.mark((function e(t,a,n,r){var c,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.createUserWithEmailAndPassword(n,r);case 3:return c=e.sent,l=c.user,e.next=7,S(l,{userName:t,displayName:a});case 7:return e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(E.a.mark((function e(t,a){var n,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N.collection(t),r=N.batch(),c=n.doc(),r.set(c,a),e.next=7,r.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),I=function(e){return e.docs.map((function(e){var t=e.data(),a=t.displayName,n=t.email,r=t.createdAt;return{id:e.id,displayName:a,email:n,createdAt:r}}))},x=function(e){return e.docs.map((function(e){var t=e.data(),a=t.viewSubscriptions,n=t.createSubscriptions,r=t.updateSubscriptions,c=t.deleteSubscriptions,l=t.viewMovies,s=t.createMovies,o=t.updateMovies,i=t.deleteMovies;return{id:e.id,viewSubscriptions:a,createSubscriptions:n,updateSubscriptions:r,deleteSubscriptions:c,viewMovies:l,createMovies:s,updateMovies:o,deleteMovies:i}}))},M=function(e){return e.docs.map((function(e){var t=e.data(),a=t.name,n=t.email,r=t.city;return{id:e.id,name:a,email:n,city:r}}))},C=function(){var e=Object(p.a)(E.a.mark((function e(t,a,n,r){var c,l,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={displayName:a,id:t,email:n,createdAt:r},e.prev=1,l=N.collection("users").doc(t),(s=N.batch()).update(l,c),e.next=7,s.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(E.a.mark((function e(t,a){var n,r,c,l,s,o,i,m,u,d,b;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.viewSubscriptions,r=a.createSubscriptions,c=a.updateSubscriptions,l=a.deleteSubscriptions,s=a.viewMovies,o=a.createMovies,i=a.updateMovies,m=a.deleteMovies,u={id:t,viewSubscriptions:n,createSubscriptions:r,updateSubscriptions:c,deleteSubscriptions:l,viewMovies:s,createMovies:o,updateMovies:i,deleteMovies:m},e.prev=2,d=N.collection("permissions").doc(t),(b=N.batch()).update(d,u),e.next=8,b.commit();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=N.collection("users").doc(t),n=N.collection("permissions").doc(t),(r=N.batch()).delete(a),r.delete(n),e.next=8,r.commit();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(E.a.mark((function e(t,a,n,r,c){var l,s,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={name:a,image:n,premiered:r,genres:c},e.prev=1,s=N.collection("movies").doc(t),(o=N.batch()).update(s,l),e.next=7,o.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N.collection(a).doc(t),(r=N.batch()).delete(n),e.next=6,r.commit();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(E.a.mark((function e(t,a,n,r,c){var l,s,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={name:a,email:n,city:r},e.prev=1,s=N.collection(c).doc(t),(o=N.batch()).update(s,l),e.next=7,o.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N.collection(a).doc(t),(r=N.batch()).delete(n),e.next=6,r.commit();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(E.a.mark((function e(t,a,n){var r,c,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=N.collection(t).doc(a),c=N.batch(),e.next=5,r.get();case 5:return(l=e.sent).exists?(console.log("Document data:",l.data()),c.update(r,n)):(console.log("No such document!"),c.set(r,n)),e.next=9,c.commit();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a,n){return e.apply(this,arguments)}}(),F=function(e){return e.docs.map((function(e){var t=e.data().movies;return{id:e.id,movies:t}}))},B=(v.a,a(10)),G=function(e){var t=e.loggedIn,a=Object(B.d)((function(e){return e.user.currentUser}));return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(i.a,{fixed:"top",expand:"lg",variant:"dark",bg:"dark"},r.a.createElement(i.a.Brand,{style:{fontWeight:"bold",color:"orange",fontSize:"12px"}},t?a?a.displayName:null:"User"),r.a.createElement(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(i.a.Collapse,{id:"basic-navbar-nav"},a?r.a.createElement(m.a,{className:"mr-auto",defaultActiveKey:"mainpage",as:"ul"},r.a.createElement(m.a.Item,{as:"li"},r.a.createElement(s.c,{to:"mainpage",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Home")),r.a.createElement(m.a.Item,{as:"li"},r.a.createElement(s.c,{to:"movies",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Movies")),r.a.createElement(m.a.Item,{as:"li"},r.a.createElement(s.c,{to:"subscriptions",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Subscription")),"admin"===a.userName?r.a.createElement(m.a.Item,{as:"li"},r.a.createElement(s.c,{to:"manageusers",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Users Management")):null):r.a.createElement(m.a,{className:"mr-auto",defaultActiveKey:"signin",as:"ul"},r.a.createElement(m.a.Item,{as:"li"},r.a.createElement(s.c,{to:"signin",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Home"))),r.a.createElement(u.a,{inline:!0},t?r.a.createElement("div",{className:"btn btn-outline-warning",onClick:function(){g.signOut()}},"SIGN OUT"):r.a.createElement(s.b,{to:"signin",className:"btn btn-outline-warning"},"SIGN IN"))))))},H=a(5),W={LOG_IN_USER:"LOG_IN_USER",SET_EMAIL_PASS_LOG_IN:"SET_EMAIL_PASS_LOG_IN",SET_USER_SIGNUP:"SET_USER_SIGNUP",GET_USERS_LIST:"GET_USERS_LIST",GET_PERMISSIONS_USERS:"GET_PERMISSIONS_USERS",SET_USERS_WITH_PERMISSIONS:"SET_USERS_WITH_PERMISSIONS",GET_USERS_LOGIN_LIST:"GET_USERS_LOGIN_LIST",GET_CURRENT_USER_PERMISSIONS:"GET_CURRENT_USER_PERMISSIONS"},V=function(e){return{type:W.SET_EMAIL_PASS_LOG_IN,payload:e}},Y=function(e){return{type:W.GET_USERS_LOGIN_LIST,payload:e}},K=Object(B.b)((function(e){return{loggedIn:e.user.loggedIn}}),(function(e){return{setUserLoginEmailPass:function(t){return e(V(t))}}}))((function(e){e.setUserLoginEmailPass;var t=Object(n.useState)(""),a=Object(H.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(H.a)(o,2),m=i[0],u=i[1],d=function(e){e.preventDefault(),function(e,t){g.signInWithEmailAndPassword(e,t)}(c,m)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign In "),r.a.createElement("form",{className:"text-center"},r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"inputEmail1"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"inputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"inputPassword1"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword1",placeholder:"Password",onChange:function(e){return u(e.target.value)}})),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return d(e)}},"Sign In"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"New User?"),r.a.createElement(s.b,{to:"signupusername",className:"badge badge-warning"}," Create Account"),r.a.createElement("br",null),r.a.createElement("br",null))))})),z=function(){return r.a.createElement("div",null,r.a.createElement(K,null))},J=Object(B.b)(null,(function(e){return{setUserLoginEmailPass:function(t){return e(V(t))}}}))((function(){var e=Object(o.g)().state,t=e.userName,a=e.userId,c=Object(n.useState)(""),l=Object(H.a)(c,2),s=l[0],i=l[1],m=Object(n.useState)(""),u=Object(H.a)(m,2),d=u[0],b=u[1],f=Object(n.useState)(""),v=Object(H.a)(f,2),g=v[0],N=v[1],h=Object(n.useState)(""),O=Object(H.a)(h,2),S=O[0],j=O[1],y=Object(n.useState)(!1),k=Object(H.a)(y,2),I=k[0],x=k[1],M=function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a?i(n):"userPassword"===a?b(n):"userconfirmPassword"===a?N(n):"displayName"===a&&j(n)},C=function(){var e=Object(p.a)(E.a.mark((function e(n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),d===g){e.next=4;break}return alert("password don't match!"),e.abrupt("return");case 4:return e.prev=4,e.next=7,_(t,S,s,d);case 7:r=e.sent,console.log(r),x(r),r&&w("usersLogin",a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){I&&(i(""),b(""),N(""),j(""),x(!1))}),[I]),r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign Up "),r.a.createElement("h3",null,"Create an account"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"displayName"},"Display Name:"),r.a.createElement("input",{className:"form-control",id:"displayName",name:"displayName",onChange:function(e){return M(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userEmail"},"Email:"),r.a.createElement("input",{className:"form-control",id:"userEmail",name:"userEmail","aria-describedby":"emailHelp",onChange:function(e){return M(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userPassword"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"userPassword",name:"userPassword",onChange:function(e){return M(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userPassword"},"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"userconfirmPassword",name:"userconfirmPassword",onChange:function(e){return M(e)}})),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return C(e)}},"Sign up")," ",r.a.createElement("br",null),r.a.createElement("br",null)))})),Q=function(){var e=Object(n.useState)(""),t=Object(H.a)(e,2),a=t[0],c=t[1],l=Object(B.d)((function(e){return e.user.usersLoginList})),s=Object(B.c)(),i=Object(n.useState)(!1),m=Object(H.a)(i,2),u=m[0],d=m[1],b=Object(n.useState)(!1),f=Object(H.a)(b,2),v=f[0],g=f[1],h=Object(n.useState)(!1),O=Object(H.a)(h,2),S=O[0],j=O[1],w=Object(n.useState)(""),_=Object(H.a)(w,2),k=_[0],I=_[1];Object(n.useEffect)((function(){N.collection("usersLogin").onSnapshot(function(){var e=Object(p.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=y(t),s(Y(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var x=function(e){e.preventDefault(),j(!0);var t=function(){var e=!1,t=!1,n="";return console.log(l),l.forEach((function(r){r.userName===a&&(e=!0,t=r.signup,n=r.id)})),{flag:e,isSign:t,id:n}}(),n=t.flag,r=t.isSign,c=t.id;d(n),g(r),I(c)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign Up - User Name "),r.a.createElement("h3",null,"Create an account"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"displayName"},"User Name from admin"),r.a.createElement("input",{className:"form-control",onChange:function(e){return c(e.target.value.toLowerCase())}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return x(e)}},"Submit")," ",r.a.createElement("br",null),r.a.createElement("br",null),S?u?v?(alert("".concat(a," already sign in the system!")),r.a.createElement(o.a,{to:"signin"})):r.a.createElement(o.a,{to:{pathname:"signup",state:{userName:a,userId:k}}}):alert("User name doesn't exist !"):null)))},X={SET_MOVIES_FROM_FIRE_STORE:"SET_MOVIES_FROM_FIRE_STORE",ADD_MOVIE:"ADD_MOVIE"},q=function(){var e=Object(B.c)(),t=Object(B.d)((function(e){return e.user.currentUser})),a=Object(B.d)((function(e){return e.user.usersPermissions}));return Object(n.useEffect)((function(){N.collection("movies").onSnapshot(function(){var t=Object(p.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.docs.map((function(e){var t=e.data(),a=t.name,n=t.genres,r=t.image,c=t.premiered;return{routeName:encodeURI(a.toLowerCase()),id:e.id,name:a,genres:n,image:r,premiered:c}})),e({type:X.SET_MOVIES_FROM_FIRE_STORE,payload:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),N.collection("permissions").onSnapshot(function(){var t=Object(p.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=x(a),e({type:W.GET_PERMISSIONS_USERS,payload:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){if(a&&t){var n=a.filter((function(e){return e.id===t.id}));e({type:W.GET_CURRENT_USER_PERMISSIONS,payload:n})}}),[a,t]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Movies - Subscriptions: Main Page"),r.a.createElement("div",null,t?"admin"!==t.userName?r.a.createElement("div",null,r.a.createElement(s.b,{to:"movies",className:"btn btn-outline-warning"},"Movies"),r.a.createElement(s.b,{to:"subscriptions",className:"btn btn-outline-warning"},"Subscriptions"),r.a.createElement(s.b,{to:"signin",className:"btn btn-outline-warning"},"Log Out")):r.a.createElement("div",null,r.a.createElement(s.b,{to:"movies",className:"btn btn-outline-warning"},"Movies"),r.a.createElement(s.b,{to:"subscriptions",className:"btn btn-outline-warning"},"Subscriptions"),r.a.createElement(s.b,{to:"manageusers",className:"btn btn-outline-warning"},"Users Management"),r.a.createElement(s.b,{to:"signin",className:"btn btn-outline-warning"},"Log Out")):null))},Z=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Manage Users"),r.a.createElement(s.b,{to:"allusers",className:"btn btn-outline-warning"},"All users"),r.a.createElement(s.b,{to:"addusername",className:"btn btn-outline-warning"},"Add user"))},$=a(212),ee=a(96),te=a(208),ae={vs:"viewSubscriptions",cs:"createSubscriptions",us:"updateSubscriptions",ds:"deleteSubscriptions",vmovies:"viewMovies",cm:"createMovies",um:"updateMovies",dm:"deleteMovies"},ne=function(e){var t=e.searchField,a=Object(B.d)((function(e){return e.user.currentUserPermissions})),c=Object(B.d)((function(e){return e.movies.movies})),l=Object(B.d)((function(e){return e.user.currentUser}));console.log(l);var o=Object(n.useState)(c),i=Object(H.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(!1),b=Object(H.a)(d,2),E=b[0],p=b[1],f=function(){p(!1)};Object(n.useEffect)((function(){try{if(t){var e=c.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));u(e)}}catch(a){console.log(a)}}),[t]);return r.a.createElement("div",null,r.a.createElement("div",{className:"container row mt-5 justify-content-center"},m.map((function(e){return r.a.createElement("div",{key:e.id,className:"card card-custom mx-2 mb-3",style:{width:"18rem",textAlign:"center",background:"black"}},r.a.createElement("img",{src:e.image,className:"card-img-top",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text"},"Genres:"),r.a.createElement($.a,{as:"ul"},e.genres.map((function(e,t){return r.a.createElement($.a.Item,{as:"li",variant:"danger",key:t}," ",e," ")}))),a[0][ae.um]?r.a.createElement(s.b,{to:{pathname:"/editmovie",state:{movie:e}},className:"btn btn-danger",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},"Edit"):null,a[0][ae.dm]?r.a.createElement(ee.a,{className:"btn btn-danger",onClick:function(e){p(!0)}},"Delete"):null,r.a.createElement(te.a,{show:E,onHide:f},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,"Delete Movie")),r.a.createElement(te.a.Body,null,"Are you sure you want to delete the movie ",e.name,"?"),r.a.createElement(te.a.Footer,null,r.a.createElement(ee.a,{variant:"danger",onClick:function(t){return function(e,t){e.preventDefault(),L(t,"movies"),f()}(t,e.id)}},"Yes"),r.a.createElement(ee.a,{variant:"secondary",onClick:f},"No"))))))}))))},re=function(){var e=Object(n.useState)(""),t=Object(H.a)(e,2),a=t[0],c=t[1],l=Object(B.d)((function(e){return e.movies.movies})),o=Object(B.d)((function(e){return e.user.currentUserPermissions}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Movies"),r.a.createElement(s.b,{to:"allmovies",className:"btn btn-outline-warning"},"All movies"),o[0][ae.cm]?r.a.createElement(s.b,{to:"addmovie",className:"btn btn-outline-warning"},"Add movie"):null,r.a.createElement("br",null),r.a.createElement("br",null),l?r.a.createElement("div",null,"Find movie: ",r.a.createElement("input",{type:"search",placeholder:"Search Movie",onChange:function(e){return c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ne,{searchField:a})):null,r.a.createElement("div",null))},ce={SET_MEMBERS_FROM_FIREBASE:"SET_MEMBERS_FROM_FIREBASE",SET_MOVIES_BY_MEMBER_FROM_FIREBASE:"SET_MOVIES_BY_MEMBER_FROM_FIREBASE"},le=function(){var e=Object(B.c)(),t=Object(B.d)((function(e){return e.user.currentUserPermissions}));return Object(n.useEffect)((function(){N.collection("members").onSnapshot(function(){var t=Object(p.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=M(a),e({type:ce.SET_MEMBERS_FROM_FIREBASE,payload:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Movies - Subscriptions: Subscriptions"),r.a.createElement(s.b,{to:"allmembers",className:"btn btn-outline-warning"},"All Members"),t[0]&&t[0][ae.cs]?r.a.createElement(s.b,{to:"addmember",className:"btn btn-outline-warning"},"Add Member"):null)},se=a(98),oe=a.n(se),ie=function(){var e=Object(n.useState)(""),t=Object(H.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),s=Object(H.a)(l,2),i=s[0],m=s[1],u=Object(n.useState)(""),d=Object(H.a)(u,2),b=d[0],f=d[1],v=Object(n.useState)(new Date),g=Object(H.a)(v,2),N=g[0],h=g[1],O=Object(n.useState)({}),S=Object(H.a)(O,2),j=S[0],y=S[1],w=Object(n.useState)(!1),_=Object(H.a)(w,2),I=_[0],x=_[1],M=Object(B.d)((function(e){return e.movies.movies})),C=Object(B.c)(),R=function(){var e=Object(p.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),b&&(n=b,oe.a.isURL(n))?a&&i&&b&&N?(y({name:a,genres:i,image:b,premiered:N}),x(!0)):alert("You must fill in all the fields!"):alert("You must insert a URL");case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("movies",j);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0!==Object.keys(j).length&&(C(function(e){return{type:X.ADD_MOVIE,payload:e}}(j)),function(){e.apply(this,arguments)}())}),[j]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Movies "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new movie")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:a,onChange:function(e){return function(e){var t=!1;M.map((function(a){a.name.toLowerCase()===e.target.value.toLowerCase()&&(t=!0)})),t?alert("The movie already exist"):c(e.target.value)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Genres"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:i,onChange:function(e){return function(e){var t=e.target.value.split(",");m(t)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Image Url "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:b,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Premiered"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"date",value:N,onChange:function(e){return h(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add movie",onClick:function(e){return R(e)}}),r.a.createElement("button",{type:"submit",className:"btn btn-secondary",onClick:function(e){return function(e){e.preventDefault(),c(""),m([]),f(""),h(new Date),x(!0)}(e)}},"Cancel"),I?r.a.createElement(o.a,{to:"allmovies"}):null)))))))))},me=function(){var e=Object(o.g)().state.movie,t=Object(n.useState)(e.name),a=Object(H.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(e.image),m=Object(H.a)(i,2),u=m[0],d=m[1],b=Object(n.useState)(e.premiered),E=Object(H.a)(b,2),p=E[0],f=E[1],v=Object(n.useState)(e.genres),g=Object(H.a)(v,2),N=g[0],h=g[1],O=Object(n.useState)(!1),S=Object(H.a)(O,2),j=S[0],y=S[1],w=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Movies"),r.a.createElement("h4",null,"Edit movie: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Movie Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Iamge Url: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:u,onChange:function(e){return d(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Premiered: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"date",value:p,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Genres: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:N.map((function(e){return e})),onChange:function(e){return function(e){var t=e.target.value.split(",").map((function(e){return w(e)}));h(t)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault(),T(e.id,c,u,p,N),alert("Details changed successfully"),y(!0)}(t)}}),r.a.createElement(s.b,{to:"allmovies",className:"btn btn-secondary"},"Cancel"),j?r.a.createElement(o.a,{to:"allmovies"}):null)))))))))},ue=a(31),de=a(207),be=function(e){var t,a,c=e.user,l=Object(n.useState)(!1),o=Object(H.a)(l,2),i=o[0],m=o[1],u=function(){m(!1)};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"card text-white bg-dark mb-3",style:{maxWidth:"18rem"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"}),r.a.createElement("span",null," ",c.email," ")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},c.displayName),r.a.createElement("p",{className:"card-text"},"Created data:  ",r.a.createElement("br",null)),r.a.createElement(de.a,(t={style:"default",size:"small"},Object(ue.a)(t,"style",{maxHeight:"28px"}),Object(ue.a)(t,"title","Permissions"),Object(ue.a)(t,"key",1),Object(ue.a)(t,"id","dropdown-size-small"),Object(ue.a)(t,"variant","secondary"),t),r.a.createElement("ul",{className:"card-body"},"Permissions:",(a=c.permissions,Object.keys(a[0]).filter((function(e){return!0===a[0][e]}))).map((function(e,t){return r.a.createElement("li",{key:t},e)}))))),r.a.createElement("div",{className:"card-footer bg-transparent"},r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(s.b,{to:{pathname:"/edituser",state:{user:c}},className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},r.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(ee.a,{className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:function(e){m(!0)}},r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))),r.a.createElement(te.a,{show:i,onHide:u},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,"Delete User")),r.a.createElement(te.a.Body,null,"Are you sure you want to delete the user ",c.displayName,"?"),r.a.createElement(te.a.Footer,null,r.a.createElement(ee.a,{variant:"danger",onClick:function(e){return function(e){e.preventDefault(),u(),U(c.id)}(e)}},"Yes"),r.a.createElement(ee.a,{variant:"secondary",onClick:u},"No")))))))},Ee=function(){var e=Object(n.useState)([]),t=Object(H.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),s=Object(H.a)(l,2),o=s[0],i=s[1],m=Object(B.c)(),u=Object(B.d)((function(e){return e.user.users}));return Object(n.useEffect)((function(){N.collection("users").onSnapshot(function(){var e=Object(p.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=I(t),c(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N.collection("permissions").onSnapshot(function(){var e=Object(p.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=x(t),i(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){a.map((function(e){var t=o.filter((function(t){return e.id===t.id}));e.permissions=t})),m(function(e){return{type:W.SET_USERS_WITH_PERMISSIONS,payload:e}}(a))}),[o]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Users List: "),r.a.createElement("div",{className:"card-group justify-content-center"},u?u.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(be,{user:e}))})):null))},pe=function(){var e=Object(n.useState)(""),t=Object(H.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(H.a)(l,2),m=i[0],u=i[1],d=Object(B.c)(),b=Object(B.d)((function(e){return e.user.usersLoginList}));Object(n.useEffect)((function(){N.collection("usersLogin").onSnapshot(function(){var e=Object(p.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=y(t),d(Y(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var f=function(e){if(e.preventDefault(),a)try{var t=new Date,n=function(){var e=!0;return b.forEach((function(t){t.userName===a&&(e=!1)})),e}();n?(j("usersLogin",{userName:a,createdAt:t,signup:!1}),alert("Details saved successfully"),u(!0)):alert("The user name ".concat(a," already exist !"))}catch(r){console.log(r)}else alert("You must insert user name"),c("")};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Users "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new user")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"User Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return c(e.target.value.toLowerCase())}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add user",onClick:function(e){return f(e)}}),r.a.createElement(s.b,{to:"manageusers",className:"btn btn-secondary"},"Cancel"),m?r.a.createElement(o.a,{to:"manageusers"}):null)))))))))},fe=function(){var e=Object(o.g)().state.user,t=Object(n.useState)(e.displayName),a=Object(H.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(e.email),m=Object(H.a)(i,2),d=m[0],b=m[1],E=Object(n.useState)(e.permissions),p=Object(H.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)(f[0][ae.vs]),N=Object(H.a)(g,2),h=N[0],O=N[1],S=Object(n.useState)(f[0][ae.cs]),j=Object(H.a)(S,2),y=j[0],w=j[1],_=Object(n.useState)(f[0][ae.us]),k=Object(H.a)(_,2),I=k[0],x=k[1],M=Object(n.useState)(f[0][ae.ds]),U=Object(H.a)(M,2),T=U[0],L=U[1],A=Object(n.useState)(f[0][ae.vmovies]),P=Object(H.a)(A,2),D=P[0],F=P[1],B=Object(n.useState)(f[0][ae.cm]),G=Object(H.a)(B,2),W=G[0],V=G[1],Y=Object(n.useState)(f[0][ae.um]),K=Object(H.a)(Y,2),z=K[0],J=K[1],Q=Object(n.useState)(f[0][ae.dm]),X=Object(H.a)(Q,2),q=X[0],Z=X[1],$=Object(n.useState)(!1),ee=Object(H.a)($,2),te=ee[0],ne=ee[1];Object(n.useEffect)((function(){W&&z&&q&&re(F,!0,ae.vmovies),y&&I&&T&&re(O,!0,ae.vs)}),[h,y,I,T,D,W,z,q]);var re=function(e,t,a){e(t),f[0][a]=t,v(f)},ce=function(e){e.target.id===ae.vs?re(O,e.target.checked,ae.vs,h):e.target.id===ae.cs?re(w,e.target.checked,ae.cs):e.target.id===ae.us?re(x,e.target.checked,ae.us):e.target.id===ae.ds?re(L,e.target.checked,ae.ds):e.target.id===ae.vmovies?re(F,e.target.checked,ae.vmovies):e.target.id===ae.cm?re(V,e.target.checked,ae.cm):e.target.id===ae.um?re(J,e.target.checked,ae.um):e.target.id===ae.dm&&re(Z,e.target.checked,ae.dm)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement("h4",null,"Edit user: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"User Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",value:d,onChange:function(e){return b(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Permissions"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(u.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(u.a.Check,{type:"checkbox",id:ae.vs,label:ae.vs,checked:h,onChange:function(e){return ce(e)}}),r.a.createElement(u.a.Check,{type:"checkbox",id:ae.cs,label:ae.cs,checked:y,onChange:function(e){return ce(e)}}),r.a.createElement(u.a.Check,{type:"checkbox",id:ae.us,label:ae.us,checked:I,onChange:function(e){return ce(e)}}),r.a.createElement(u.a.Check,{type:"checkbox",id:ae.ds,label:ae.ds,checked:T,onChange:function(e){return ce(e)}}),r.a.createElement(u.a.Check,{type:"checkbox",id:ae.vmovies,label:ae.vmovies,checked:D,onChange:function(e){return ce(e)}}),r.a.createElement(u.a.Check,{type:"checkbox",id:ae.cm,label:ae.cm,checked:W,onChange:function(e){return ce(e)}}),r.a.createElement(u.a.Check,{type:"checkbox",id:ae.um,label:ae.um,checked:z,onChange:function(e){return ce(e)}}),r.a.createElement(u.a.Check,{type:"checkbox",id:ae.dm,label:ae.dm,checked:q,onChange:function(e){return ce(e)}})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault(),C(e.id,c,d,e.createdAt),R(e.id,f[0]),alert("Details changed successfully"),ne(!0)}(t)}}),r.a.createElement(s.b,{to:"allusers",className:"btn btn-secondary"},"Cancel"),te?r.a.createElement(o.a,{to:"allusers"}):null)))))))))},ve=a(67),ge=a(213),Ne=a(102),he=function(e){var t=e.member,a=Object(B.d)((function(e){return e.user.currentUserPermissions})),c=Object(B.d)((function(e){return e.movies.movies})),l=Object(B.d)((function(e){return e.members.moviesByMember})),o=Object(n.useState)([]),i=Object(H.a)(o,2),d=i[0],b=i[1],E=Object(n.useState)([]),p=Object(H.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)(!1),N=Object(H.a)(g,2),h=N[0],O=N[1],S=Object(n.useState)("details"),j=Object(H.a)(S,2),y=j[0],w=j[1],_=Object(n.useState)(!1),k=Object(H.a)(_,2),I=k[0],x=k[1],M=Object(n.useState)(""),C=Object(H.a)(M,2),R=C[0],U=C[1],T=Object(n.useState)(""),L=Object(H.a)(T,2),A=L[0],F=L[1],G=Object(n.useState)(""),W=Object(H.a)(G,2),V=W[0],Y=W[1],K=function(){O(!1)},z=function(e,t,a){e.preventDefault(),U(t),Y(a)};Object(n.useEffect)((function(){if(l.length>0){var e=l.filter((function(e){return e.id===t.id}));b(e[0].movies)}}),[l]),Object(n.useEffect)((function(){if(R&&A){var e={movieId:R,date:A};b([].concat(Object(ve.a)(d),[e]))}}),[R,A]);var J=function(){var e=c.filter((function(e){return 0===d.filter((function(t){return t.movieId===e.id})).length}));v(e)};return r.a.createElement("div",null,r.a.createElement(ge.a,{bg:"dark"},r.a.createElement(ge.a.Header,{bg:"secondary"},r.a.createElement(m.a,{variant:"tabs",defaultActiveKey:"details",activeKey:y,as:"ul",onSelect:function(e){return w(e)}},r.a.createElement(m.a.Item,{as:"li"},r.a.createElement(m.a.Link,{eventKey:"details",className:"nav nav-tabs btn btn-danger"},"Member Details")),r.a.createElement(m.a.Item,{as:"li"},r.a.createElement(m.a.Link,{eventKey:"watched",className:"nav nav-tabs btn btn-danger"},"Movies watched")))),"details"===y?r.a.createElement("div",null,r.a.createElement(ge.a.Body,null,r.a.createElement(ge.a.Title,null,t.name),r.a.createElement(ge.a.Text,null,"Email: ",t.email,r.a.createElement("br",null),"City: ",t.city)),r.a.createElement(ge.a.Footer,null,a[0][ae.us]?r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(s.b,{to:{pathname:"/editmember",state:{member:t}},className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},r.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))):null,a[0][ae.ds]?r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(ee.a,{className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:function(e){O(!0)}},r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))):null,r.a.createElement(te.a,{show:h,onHide:K},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,"Delete Member")),r.a.createElement(te.a.Body,null,"Are you sure you want to delete the user ",t.name,"?"),r.a.createElement(te.a.Footer,null,r.a.createElement(ee.a,{variant:"danger",onClick:function(e){return function(e){e.preventDefault(),K(),P(t.id,"members"),P(t.id,"subscriptions")}(e)}},"Yes"),r.a.createElement(ee.a,{variant:"secondary",onClick:K},"No")))))):r.a.createElement("div",null,r.a.createElement(ge.a.Body,null,r.a.createElement(ge.a.Title,null,"Movies watched"),r.a.createElement(ge.a.Text,{as:"ul"},d?d.map((function(e,t){var a="";return c.filter((function(t){return t.id===e.movieId&&(a=t.name),a})),r.a.createElement("li",{key:t},"Movie : ",a," ",r.a.createElement("br",null),"Date: ",e.date)})):null)),r.a.createElement(ge.a.Footer,null,a[0][ae.us]?r.a.createElement(ee.a,{className:"btn btn-danger",onClick:function(e){!function(e){e.preventDefault(),x(!I),c&&d&&J()}(e)}},"Subscribe to new movie "):null,I?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(Ne.a,null,r.a.createElement(Ne.a.Toggle,{variant:"secondary",id:"dropdown-basic"},V?"".concat(V):"Movies List"),r.a.createElement(Ne.a.Menu,null,f.length>0?f.map((function(e,t){return r.a.createElement(Ne.a.Item,{key:t,variant:"warning",className:"btn btn-secondary",onClick:function(t){return z(t,e.id,e.name)}},e.name)})):c.map((function(e,t){return r.a.createElement(Ne.a.Item,{key:t,variant:"warning",className:"btn btn-secondary",onClick:function(t){return z(t,e.id,e.name)}},e.name)})))),r.a.createElement(u.a.Group,{controlId:"dw"},r.a.createElement(u.a.Label,null,"Select Date watched:"),r.a.createElement(u.a.Control,{className:"btn btn-secondary",type:"date",name:"dw",placeholder:"Date watched",onChange:function(e){return F(e.target.value)}})),r.a.createElement(ee.a,{className:"btn btn-danger",onClick:function(e){if(e.preventDefault(),R&&A){var a=t.id;D("subscriptions",a,{movies:d}),console.log(d),alert("".concat(t.name," member is subscribed to ").concat(V," movie"))}else alert("You must choose movie & date"),U(""),F("")}},"Subscribe")):null))))},Oe=function(){var e=Object(B.d)((function(e){return e.members.members})),t=Object(B.c)();return Object(n.useEffect)((function(){N.collection("subscriptions").onSnapshot(function(){var e=Object(p.a)(E.a.mark((function e(a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=F(a),t({type:ce.SET_MOVIES_BY_MEMBER_FROM_FIREBASE,payload:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Members List: "),r.a.createElement("div",{className:"card-group justify-content-center"},e.map((function(e,t){return r.a.createElement(he,{key:t,member:e})}))))},Se=function(){var e=Object(o.g)().state.member,t=Object(n.useState)(e.name),a=Object(H.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(e.email),m=Object(H.a)(i,2),u=m[0],d=m[1],b=Object(n.useState)(e.city),E=Object(H.a)(b,2),p=E[0],f=E[1],v=Object(n.useState)(!1),g=Object(H.a)(v,2),N=g[0],h=g[1];return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"Members"),r.a.createElement("h4",null,"Edit member: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Member Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",value:u,onChange:function(e){return d(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"City"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:p,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault(),A(e.id,c,u,p,"members"),alert("Details changed successfully"),h(!0)}(t)}}),r.a.createElement(s.b,{to:"allmembers",className:"btn btn-secondary"},"Cancel"),N?r.a.createElement(o.a,{to:"allmembers"}):null)))))))))},je=function(){var e=Object(n.useState)(""),t=Object(H.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(H.a)(l,2),m=i[0],u=i[1],d=Object(n.useState)(""),b=Object(H.a)(d,2),E=b[0],p=b[1],f=Object(n.useState)(!1),v=Object(H.a)(f,2),g=v[0],N=v[1],h=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Members "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new member")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",role:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return c(h(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",onChange:function(e){return u(h(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"City"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return p(h(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add member",onClick:function(e){return function(e){e.preventDefault(),a&&m&&E?(j("members",{name:a,email:m,city:E}),alert("Details saved successfully"),N(!0)):(alert("You muse insert name & email & city"),c(""),u(""),p(""))}(e)}}),r.a.createElement(s.b,{to:"allmembers",className:"btn btn-secondary"},"Cancel"),g?r.a.createElement(o.a,{to:"allmembers"}):null)))))))))};var ye=Object(B.b)((function(e){return{loggedIn:e.user.loggedIn}}),(function(e){return{setUserLoggenIn:function(t){return e({type:W.LOG_IN_USER,payload:t})},setUserLoginEmailPass:function(t){return e(V(t))}}}))((function(e){var t=e.loggedIn,a=e.setUserLoggenIn,c=e.setUserLoginEmailPass;return Object(n.useEffect)((function(){var e,t,n=(e=a,t=c,g.onAuthStateChanged(function(){var a=Object(p.a)(E.a.mark((function a(n){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n){a.next=9;break}return e(!0),a.next=4,S(n);case 4:a.sent.onSnapshot((function(e){t(Object(d.a)({id:e.id},e.data()))})),console.log("The user is logged in"),a.next=12;break;case 9:e(!1),t(n),console.log("The user is not logged in");case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()));return function(){n()}}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(G,{loggedIn:t}),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/signup",component:J}),r.a.createElement(o.b,{path:"/signupusername",component:Q}),r.a.createElement(o.b,{path:"/mainpage",component:q}),r.a.createElement(o.b,{path:"/signin",component:z}),r.a.createElement(o.b,{path:"/manageusers",component:Z}),r.a.createElement(o.b,{path:"/allusers",component:Ee}),r.a.createElement(o.b,{path:"/addusername",component:pe}),r.a.createElement(o.b,{path:"/edituser",component:fe}),r.a.createElement(o.b,{path:"/movies",component:re}),r.a.createElement(o.b,{path:"/allmovies",component:ne}),r.a.createElement(o.b,{path:"/editmovie",component:me}),r.a.createElement(o.b,{path:"/addmovie",component:ie}),r.a.createElement(o.b,{path:"/subscriptions",component:le}),r.a.createElement(o.b,{path:"/allmembers",component:Oe}),r.a.createElement(o.b,{path:"/editmember",component:Se}),r.a.createElement(o.b,{path:"/addmember",component:je})),t?r.a.createElement(o.a,{from:"/signin",to:"/mainpage"}):r.a.createElement(o.a,{to:"signin"}))})),we=a(34),_e=a(100),ke=a.n(_e),Ie={currentUser:null,currentUserPermissions:[],loggedIn:!1,error:null,users:[],usersPermissions:[],usersLoginList:[]},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.LOG_IN_USER:return Object(d.a)(Object(d.a)({},e),{},{loggedIn:t.payload});case W.SET_EMAIL_PASS_LOG_IN:return Object(d.a)(Object(d.a)({},e),{},{currentUser:t.payload});case W.GET_USERS_LIST:return Object(d.a)(Object(d.a)({},e),{},{users:t.payload});case W.GET_PERMISSIONS_USERS:return Object(d.a)(Object(d.a)({},e),{},{usersPermissions:t.payload});case W.SET_USERS_WITH_PERMISSIONS:return Object(d.a)(Object(d.a)({},e),{},{users:t.payload});case W.GET_USERS_LOGIN_LIST:return Object(d.a)(Object(d.a)({},e),{},{usersLoginList:t.payload});case W.GET_CURRENT_USER_PERMISSIONS:return Object(d.a)(Object(d.a)({},e),{},{currentUserPermissions:t.payload});default:return e}},Me={movies:[]},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X.SET_MOVIES_FROM_FIRE_STORE:return Object(d.a)(Object(d.a)({},e),{},{movies:t.payload});case X.ADD_MOVIE:return Object(d.a)(Object(d.a)({},e),{},{movies:[].concat(Object(ve.a)(e.movies),[t.payload])});default:return e}},Re={members:[],moviesByMember:[]},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce.SET_MEMBERS_FROM_FIREBASE:return Object(d.a)(Object(d.a)({},e),{},{members:t.payload});case ce.SET_MOVIES_BY_MEMBER_FROM_FIREBASE:return Object(d.a)(Object(d.a)({},e),{},{moviesByMember:t.payload});default:return e}},Te=Object(we.c)({user:xe,movies:Ce,members:Ue}),Le=(a(201),[ke.a]);var Ae=Object(we.d)(Te,we.a.apply(void 0,Le));l.a.render(r.a.createElement(B.a,{store:Ae},r.a.createElement(s.a,null,r.a.createElement(ye,null))),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.e4b08c95.chunk.js.map