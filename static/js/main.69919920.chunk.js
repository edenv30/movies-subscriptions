(this["webpackJsonpmovies-subscriptions"]=this["webpackJsonpmovies-subscriptions"]||[]).push([[0],{103:function(e,t,a){e.exports=a(200)},108:function(e,t,a){},109:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),s=a(9),o=(a(108),a(109),a(15)),m=function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Oops! Page not found!"))},i=function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Movies - Subscriptions"))},u=a(208),d=a(209),b=a(207),E=a(12),p=a(8),f=a.n(p),v=a(11),g=a(50),N=a.n(g);a(111),a(115);N.a.initializeApp({apiKey:"AIzaSyCN1VJ-36hCrlmFmMxyTrB7pXn1QubKLf0",authDomain:"movies-subscriptions.firebaseapp.com",databaseURL:"https://movies-subscriptions.firebaseio.com",projectId:"movies-subscriptions",storageBucket:"movies-subscriptions.appspot.com",messagingSenderId:"261996716763",appId:"1:261996716763:web:84505c38bea3ebad8d62fe",measurementId:"G-BR8W9C4BC3"});var h=N.a.auth(),O=N.a.firestore(),S={viewSubscriptions:!0,createSubscriptions:!1,updateSubscriptions:!1,deleteSubscriptions:!1,viewMovies:!0,createMovies:!1,updateMovies:!1,deleteMovies:!1},j=function(){var e=Object(v.a)(f.a.mark((function e(t,a,n){var r,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=O.collection(t),c=O.batch(),l=r.doc(a),c.set(l,n),e.next=7,c.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=O.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=18;break}return r=t.displayName,c=t.email,l=new Date,j("permissions",t.uid,S),e.prev=10,e.next=13,n.set(Object(E.a)({displayName:r,email:c,createdAt:l},a));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.log("error creating user",e.t0.message);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=O.collection(t),r=O.batch(),c=n.doc(),"users"===t&&(a.id=c.id),"usersLogin"===t&&j("permissions",c.id,S),r.set(c,a),e.next=9,r.commit();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(v.a)(f.a.mark((function e(t,a,n,r,c){var l,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.createUserWithEmailAndPassword(r,c);case 3:return l=e.sent,s=l.user,e.next=7,y(s,{userName:t,userId:a,displayName:n});case 7:return e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),_=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=O.collection(t),r=O.batch(),c=n.doc(),r.set(c,a),e.next=7,r.commit();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),I=function(e){return e.docs.map((function(e){var t=e.data(),a=t.userName,n=t.signup;return{id:e.id,userName:a,signup:n}}))},M=function(e){return e.docs.map((function(e){var t=e.data(),a=t.displayName,n=t.email,r=t.createdAt,c=t.userName,l=t.userId;return{id:e.id,displayName:a,email:n,createdAt:r,userName:c,userId:l}}))},C=function(e){return e.docs.map((function(e){var t=e.data(),a=t.viewSubscriptions,n=t.createSubscriptions,r=t.updateSubscriptions,c=t.deleteSubscriptions,l=t.viewMovies,s=t.createMovies,o=t.updateMovies,m=t.deleteMovies;return{id:e.id,viewSubscriptions:a,createSubscriptions:n,updateSubscriptions:r,deleteSubscriptions:c,viewMovies:l,createMovies:s,updateMovies:o,deleteMovies:m}}))},x=function(e){return e.docs.map((function(e){var t=e.data(),a=t.name,n=t.email,r=t.city;return{id:e.id,name:a,email:n,city:r}}))},R=function(e){return e.docs.map((function(e){var t=e.data().movies;return{id:e.id,movies:t}}))},U=function(){var e=Object(v.a)(f.a.mark((function e(t,a,n){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=O.collection(t).doc(a),(c=O.batch()).update(r,n),e.next=6,c.commit();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=O.collection(t).doc(a),(r=O.batch()).delete(n),e.next=6,r.commit();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(v.a)(f.a.mark((function e(t,a,n){var r,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=O.collection(t).doc(a),c=O.batch(),e.next=5,r.get();case 5:return(l=e.sent).exists?(console.log("Document data:",l.data()),c.update(r,n)):(console.log("No such document!"),c.set(r,n)),e.next=9,c.commit();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a,n){return e.apply(this,arguments)}}(),P=(N.a,a(10)),A=function(e){var t=e.loggedIn,a=Object(P.d)((function(e){return e.user.currentUser}));return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(u.a,{fixed:"top",expand:"lg",variant:"dark",bg:"dark"},r.a.createElement(u.a.Brand,{style:{fontWeight:"bold",color:"orange",fontSize:"12px"}},t?a?a.displayName:null:"User"),r.a.createElement(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(u.a.Collapse,{id:"basic-navbar-nav"},a?r.a.createElement(d.a,{className:"mr-auto",defaultActiveKey:"mainpage",as:"ul"},r.a.createElement(d.a.Item,{as:"li"},r.a.createElement(s.c,{to:"mainpage",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Home")),r.a.createElement(d.a.Item,{as:"li"},r.a.createElement(s.c,{to:"movies",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Movies")),r.a.createElement(d.a.Item,{as:"li"},r.a.createElement(s.c,{to:"subscriptions",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Subscription")),"admin"===a.userName?r.a.createElement(d.a.Item,{as:"li"},r.a.createElement(s.c,{to:"manageusers",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Users Management")):null):r.a.createElement(d.a,{className:"mr-auto",defaultActiveKey:"signin",as:"ul"},r.a.createElement(d.a.Item,{as:"li"},r.a.createElement(s.c,{to:"signin",className:"nav-link",activeClassName:"selected",activeStyle:{fontWeight:"bold"}},"Home"))),r.a.createElement(b.a,{inline:!0},t?r.a.createElement("div",{className:"btn btn-outline-warning",onClick:function(){h.signOut()}},"SIGN OUT"):r.a.createElement(s.b,{to:"signin",className:"btn btn-outline-warning"},"SIGN IN"))))))},G=a(5),D={LOG_IN_USER:"LOG_IN_USER",SET_EMAIL_PASS_LOG_IN:"SET_EMAIL_PASS_LOG_IN",SET_USER_SIGNUP:"SET_USER_SIGNUP",GET_USERS_LIST:"GET_USERS_LIST",GET_PERMISSIONS_USERS:"GET_PERMISSIONS_USERS",SET_USERS_WITH_PERMISSIONS:"SET_USERS_WITH_PERMISSIONS",GET_USERS_LOGIN_LIST:"GET_USERS_LOGIN_LIST",GET_CURRENT_USER_PERMISSIONS:"GET_CURRENT_USER_PERMISSIONS"},F=function(e){return{type:D.SET_EMAIL_PASS_LOG_IN,payload:e}},B=function(e){return{type:D.GET_USERS_LOGIN_LIST,payload:e}},H=Object(P.b)((function(e){return{loggedIn:e.user.loggedIn}}),(function(e){return{setUserLoginEmailPass:function(t){return e(F(t))}}}))((function(e){e.setUserLoginEmailPass;var t=Object(n.useState)(""),a=Object(G.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),m=Object(G.a)(o,2),i=m[0],u=m[1],d=function(e){e.preventDefault(),function(e,t){h.signInWithEmailAndPassword(e,t)}(c,i)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign In "),r.a.createElement("form",{className:"text-center"},r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"inputEmail1"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"inputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"inputPassword1"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword1",placeholder:"Password",onChange:function(e){return u(e.target.value)}})),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return d(e)}},"Sign In"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"New User?"),r.a.createElement(s.b,{to:"signupusername",className:"badge badge-warning"}," Create Account"),r.a.createElement("br",null),r.a.createElement("br",null))))})),W=function(){return r.a.createElement("div",null,r.a.createElement(H,null))},V=Object(P.b)(null,(function(e){return{setUserLoginEmailPass:function(t){return e(F(t))}}}))((function(){var e=Object(o.h)().state,t=e.userName,a=e.userId,c=Object(n.useState)(""),l=Object(G.a)(c,2),s=l[0],m=l[1],i=Object(n.useState)(""),u=Object(G.a)(i,2),d=u[0],b=u[1],E=Object(n.useState)(""),p=Object(G.a)(E,2),g=p[0],N=p[1],h=Object(n.useState)(""),O=Object(G.a)(h,2),S=O[0],j=O[1],y=Object(n.useState)(!1),w=Object(G.a)(y,2),_=w[0],I=w[1],M=function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a?m(n):"userPassword"===a?b(n):"userconfirmPassword"===a?N(n):"displayName"===a&&j(n)},C=function(){var e=Object(v.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),d===g){e.next=4;break}return alert("password don't match!"),e.abrupt("return");case 4:return e.prev=4,e.next=7,k(t,a,S,s,d);case 7:r=e.sent,I(r),r&&U("usersLogin",a,{signup:!0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){_&&(m(""),b(""),N(""),j(""),I(!1))}),[_]),r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign Up "),r.a.createElement("h3",null,"Create an account"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"displayName"},"Display Name:"),r.a.createElement("input",{className:"form-control",id:"displayName",name:"displayName",onChange:function(e){return M(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userEmail"},"Email:"),r.a.createElement("input",{className:"form-control",id:"userEmail",name:"userEmail","aria-describedby":"emailHelp",onChange:function(e){return M(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userPassword"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"userPassword",name:"userPassword",onChange:function(e){return M(e)}})),r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"userPassword"},"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"userconfirmPassword",name:"userconfirmPassword",onChange:function(e){return M(e)}})),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return C(e)}},"Sign up")," ",r.a.createElement("br",null),r.a.createElement("br",null)))})),Y=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(P.d)((function(e){return e.user.usersLoginList})),s=Object(P.c)(),m=Object(n.useState)(!1),i=Object(G.a)(m,2),u=i[0],d=i[1],b=Object(n.useState)(!1),E=Object(G.a)(b,2),p=E[0],g=E[1],N=Object(n.useState)(!1),h=Object(G.a)(N,2),S=h[0],j=h[1],y=Object(n.useState)(""),w=Object(G.a)(y,2),k=w[0],_=w[1];Object(n.useEffect)((function(){O.collection("usersLogin").onSnapshot(function(){var e=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=I(t),s(B(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var M=function(e){e.preventDefault(),j(!0);var t=function(){var e=!1,t=!1,n="";return l.forEach((function(r){r.userName===a&&(e=!0,t=r.signup,n=r.id)})),{flag:e,isSign:t,id:n}}(),n=t.flag,r=t.isSign,c=t.id;d(n),g(r),_(c)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Sign Up - User Name "),r.a.createElement("h3",null,"Create an account"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group w-25 p-3 mx-auto"},r.a.createElement("label",{htmlFor:"displayName"},"User Name from admin"),r.a.createElement("input",{className:"form-control",onChange:function(e){return c(e.target.value.toLowerCase())}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-warning",onClick:function(e){return M(e)}},"Submit")," ",r.a.createElement("br",null),r.a.createElement("br",null),S?u?p?(alert("".concat(a," already sign in the system!")),r.a.createElement(o.a,{to:"signin"})):r.a.createElement(o.a,{to:{pathname:"signup",state:{userName:a,userId:k}}}):alert("User name doesn't exist !"):null)))},K={SET_MOVIES_FROM_FIRE_STORE:"SET_MOVIES_FROM_FIRE_STORE",ADD_MOVIE:"ADD_MOVIE"},z=function(){var e=Object(P.c)(),t=Object(P.d)((function(e){return e.user.currentUser})),a=Object(P.d)((function(e){return e.user.usersPermissions}));return Object(n.useEffect)((function(){O.collection("movies").onSnapshot(function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.docs.map((function(e){var t=e.data(),a=t.name,n=t.genres,r=t.image,c=t.premiered;return{routeName:encodeURI(a.toLowerCase()),id:e.id,name:a,genres:n,image:r,premiered:c}})),e({type:K.SET_MOVIES_FROM_FIRE_STORE,payload:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),O.collection("permissions").onSnapshot(function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=C(a),e({type:D.GET_PERMISSIONS_USERS,payload:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){if(a&&t){var n=a.filter((function(e){return e.id===t.id}));e({type:D.GET_CURRENT_USER_PERMISSIONS,payload:n})}}),[a,t]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Movies - Subscriptions: Main Page"),r.a.createElement("div",null,t?"admin"!==t.userName?r.a.createElement("div",null,r.a.createElement(s.b,{to:"movies",className:"btn btn-outline-warning"},"Movies"),r.a.createElement(s.b,{to:"subscriptions",className:"btn btn-outline-warning"},"Subscriptions"),r.a.createElement(s.b,{to:"signin",className:"btn btn-outline-warning"},"Log Out")):r.a.createElement("div",null,r.a.createElement(s.b,{to:"movies",className:"btn btn-outline-warning"},"Movies"),r.a.createElement(s.b,{to:"subscriptions",className:"btn btn-outline-warning"},"Subscriptions"),r.a.createElement(s.b,{to:"manageusers",className:"btn btn-outline-warning"},"Users Management"),r.a.createElement(s.b,{to:"signin",className:"btn btn-outline-warning"},"Log Out")):null))},J=a(95),Q=function(e){var t=e.children,a=Object(o.g)();return r.a.createElement(J.a,{className:"btn btn-danger",type:"button",onClick:function(){return a.goBack()}},t)},X=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Manage Users"),r.a.createElement("div",null,r.a.createElement(s.b,{to:"allusers",className:"btn btn-outline-warning"},"All users"),r.a.createElement(s.b,{to:"addusername",className:"btn btn-outline-warning"},"Add user")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Q,{children:"Go back"}))},q=a(210),Z=a(206),$={vs:"viewSubscriptions",cs:"createSubscriptions",us:"updateSubscriptions",ds:"deleteSubscriptions",vmovies:"viewMovies",cm:"createMovies",um:"updateMovies",dm:"deleteMovies"},ee=function(e){var t=e.movie,a=Object(P.d)((function(e){return e.user.currentUserPermissions})),c=Object(n.useState)(!1),l=Object(G.a)(c,2),o=l[0],m=l[1],i=function(){m(!1)};return r.a.createElement("div",{key:t.id,className:"card card-custom mx-2 mb-3",style:{width:"18rem",textAlign:"center",background:"black"}},r.a.createElement("img",{src:t.image,className:"card-img-top",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.name),r.a.createElement("p",{className:"card-text"},"Genres:"),r.a.createElement(q.a,{as:"ul"},t.genres.map((function(e,t){return r.a.createElement(q.a.Item,{as:"li",variant:"danger",key:t}," ",e," ")}))),r.a.createElement("br",null),r.a.createElement("br",null),a[0][$.um]?r.a.createElement(s.b,{to:{pathname:"/editmovie",state:{movie:t}},className:"btn btn-danger",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},"Edit"):null,a[0][$.dm]?r.a.createElement(J.a,{className:"btn btn-danger",onClick:function(e){m(!0)}},"Delete"):null,r.a.createElement(Z.a,{show:o,onHide:i},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement(Z.a.Header,{closeButton:!0},r.a.createElement(Z.a.Title,null,"Delete Movie")),r.a.createElement(Z.a.Body,null,"Are you sure you want to delete the movie ",t.name,"?"),r.a.createElement(Z.a.Footer,null,r.a.createElement(J.a,{variant:"danger",onClick:function(e){return function(e,t){e.preventDefault(),T("movies",t),i()}(e,t.id)}},"Yes"),r.a.createElement(J.a,{variant:"secondary",onClick:i},"No"))))))},te=function(e){var t=e.searchField,a=Object(P.d)((function(e){return e.movies.movies})),c=Object(n.useState)(a),l=Object(G.a)(c,2),s=l[0],o=l[1];return Object(n.useEffect)((function(){try{if(t){var e=a.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));o(e)}}catch(n){console.log(n)}}),[t]),Object(n.useEffect)((function(){o(a)}),[a]),r.a.createElement("div",null,r.a.createElement("div",{className:"container row mt-5 justify-content-center"},s?s.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(ee,{movie:e}))})):null),r.a.createElement(Q,{children:"Go back"}))},ae=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(P.d)((function(e){return e.movies.movies})),o=Object(P.d)((function(e){return e.user.currentUserPermissions}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Movies - Subscriptions: Movies"),r.a.createElement("div",null,r.a.createElement(s.b,{to:"allmovies",className:"btn btn-outline-warning"},"All movies"),o[0][$.cm]?r.a.createElement(s.b,{to:"addmovie",className:"btn btn-outline-warning"},"Add movie"):null,r.a.createElement("br",null),r.a.createElement("br",null),l?r.a.createElement("div",null,"Find movie: ",r.a.createElement("input",{type:"search",placeholder:"Search Movie",onChange:function(e){return c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(te,{searchField:a})):r.a.createElement(Q,{children:"Go back"})),r.a.createElement("div",null))},ne={SET_MEMBERS_FROM_FIREBASE:"SET_MEMBERS_FROM_FIREBASE",SET_MOVIES_BY_MEMBER_FROM_FIREBASE:"SET_MOVIES_BY_MEMBER_FROM_FIREBASE"},re=function(){var e=Object(P.c)(),t=Object(P.d)((function(e){return e.user.currentUserPermissions}));return Object(n.useEffect)((function(){O.collection("members").onSnapshot(function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=x(a),e({type:ne.SET_MEMBERS_FROM_FIREBASE,payload:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Movies - Subscriptions: Subscriptions"),r.a.createElement("div",null,t[0]&&t[0][$.vs]?r.a.createElement(s.b,{to:"allmembers",className:"btn btn-outline-warning"},"All Members"):null,t[0]&&t[0][$.cs]?r.a.createElement(s.b,{to:"addmember",className:"btn btn-outline-warning"},"Add Member"):null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Q,{children:"Go back"}))},ce=a(97),le=a.n(ce),se=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),s=Object(G.a)(l,2),m=s[0],i=s[1],u=Object(n.useState)(""),d=Object(G.a)(u,2),b=d[0],E=d[1],p=Object(n.useState)(new Date),g=Object(G.a)(p,2),N=g[0],h=g[1],O=Object(n.useState)({}),S=Object(G.a)(O,2),j=S[0],y=S[1],w=Object(n.useState)(!1),k=Object(G.a)(w,2),I=k[0],M=k[1],C=Object(P.d)((function(e){return e.movies.movies})),x=Object(P.c)(),R=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),b&&(n=b,le.a.isURL(n))?a&&m&&b&&N?(y({name:a,genres:m,image:b,premiered:N}),M(!0)):alert("You must fill in all the fields!"):alert("You must insert a URL");case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("movies",j);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0!==Object.keys(j).length&&(x(function(e){return{type:K.ADD_MOVIE,payload:e}}(j)),function(){e.apply(this,arguments)}())}),[j]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Movies "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new movie")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:a,onChange:function(e){return function(e){var t=!1;C.map((function(a){a.name.toLowerCase()===e.target.value.toLowerCase()&&(t=!0)})),t?alert("The movie already exist"):c(e.target.value)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Genres"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:m,onChange:function(e){return function(e){var t=e.target.value.split(",");i(t)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Image Url "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:b,onChange:function(e){return E(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Premiered"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"date",value:N,onChange:function(e){return h(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add movie",onClick:function(e){return R(e)}}),r.a.createElement("button",{type:"submit",className:"btn btn-secondary",onClick:function(e){return function(e){e.preventDefault(),c(""),i([]),E(""),h(new Date),M(!0)}(e)}},"Cancel"),I?r.a.createElement(o.a,{to:"allmovies"}):null)))))))),r.a.createElement(Q,{children:"Go back"}))},oe=function(){var e=Object(o.h)().state.movie,t=Object(n.useState)(e.name),a=Object(G.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(e.image),i=Object(G.a)(m,2),u=i[0],d=i[1],b=Object(n.useState)(e.premiered),E=Object(G.a)(b,2),p=E[0],f=E[1],v=Object(n.useState)(e.genres),g=Object(G.a)(v,2),N=g[0],h=g[1],O=Object(n.useState)(!1),S=Object(G.a)(O,2),j=S[0],y=S[1],w=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Movies"),r.a.createElement("h4",null,"Edit movie: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Movie Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Iamge Url: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:u,onChange:function(e){return d(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Premiered: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"date",value:p,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Genres: "),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:N.map((function(e){return e})),onChange:function(e){return function(e){var t=e.target.value.split(",").map((function(e){return w(e)}));h(t)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault(),U("movies",e.id,{name:c,image:u,premiered:p,genres:N}),alert("Details changed successfully"),y(!0)}(t)}}),r.a.createElement(s.b,{to:"allmovies",className:"btn btn-secondary"},"Cancel"),j?r.a.createElement(o.a,{to:"allmovies"}):null)))))))),r.a.createElement(Q,{children:"Go back"}))},me=a(205),ie=function(e){var t,a=e.user,c=Object(n.useState)(!1),l=Object(G.a)(c,2),o=l[0],m=l[1],i=function(){m(!1)};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"card text-white bg-dark mb-3",style:{maxWidth:"18rem"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"}),r.a.createElement("span",null," ",a.email," ")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},a.displayName),r.a.createElement("p",{className:"card-text"},"Created data:  ",r.a.createElement("br",null)),r.a.createElement(me.a,{size:"small",style:{maxHeight:"28px"},title:"Permissions",key:1,id:"dropdown-size-small",variant:"secondary"},r.a.createElement("ul",{className:"card-body"},"Permissions:",(t=a.permissions,Object.keys(t[0]).filter((function(e){return!0===t[0][e]}))).map((function(e,t){return r.a.createElement("li",{key:t},e)}))))),r.a.createElement("div",{className:"card-footer bg-transparent"},r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(s.b,{to:{pathname:"/edituser",state:{user:a}},className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},r.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(J.a,{className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:function(e){m(!0)}},r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))),r.a.createElement(Z.a,{show:o,onHide:i},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement(Z.a.Header,{closeButton:!0},r.a.createElement(Z.a.Title,null,"Delete User")),r.a.createElement(Z.a.Body,null,"Are you sure you want to delete the user ",a.displayName,"?"),r.a.createElement(Z.a.Footer,null,r.a.createElement(J.a,{variant:"danger",onClick:function(e){return function(e){e.preventDefault(),i(),T("users",a.id),T("permissions",a.id),T("usersLogin",a.userId)}(e)}},"Yes"),r.a.createElement(J.a,{variant:"secondary",onClick:i},"No")))))))},ue=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),s=Object(G.a)(l,2),o=s[0],m=s[1],i=Object(P.c)(),u=Object(P.d)((function(e){return e.user.users}));return Object(n.useEffect)((function(){O.collection("users").onSnapshot(function(){var e=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=M(t),c(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O.collection("permissions").onSnapshot(function(){var e=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=C(t),m(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){a.map((function(e){var t=o.filter((function(t){return e.id===t.id}));e.permissions=t})),i(function(e){return{type:D.SET_USERS_WITH_PERMISSIONS,payload:e}}(a))}),[o]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Users List: "),r.a.createElement("div",{className:"card-group justify-content-center"},u?u.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(ie,{user:e}))})):null),r.a.createElement(Q,{children:"Go back"}))},de=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),m=Object(G.a)(l,2),i=m[0],u=m[1],d=Object(P.c)(),b=Object(P.d)((function(e){return e.user.usersLoginList}));Object(n.useEffect)((function(){O.collection("usersLogin").onSnapshot(function(){var e=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=I(t),d(B(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var E=function(e){if(e.preventDefault(),a)try{var t=new Date,n=function(){var e=!0;return b.forEach((function(t){t.userName===a&&(e=!1)})),e}();n?(w("usersLogin",{userName:a,createdAt:t,signup:!1}),alert("Details saved successfully"),u(!0)):alert("The user name ".concat(a," already exist !"))}catch(r){console.log(r)}else alert("You must insert user name"),c("")};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Users "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new user")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"User Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return c(e.target.value.toLowerCase())}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add user",onClick:function(e){return E(e)}}),r.a.createElement(s.b,{to:"manageusers",className:"btn btn-secondary"},"Cancel"),i?r.a.createElement(o.a,{to:"manageusers"}):null)))))))),r.a.createElement(Q,{children:"Go back"}))},be=function(){var e=Object(o.h)().state.user,t=Object(n.useState)(e.displayName),a=Object(G.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(e.email),i=Object(G.a)(m,2),u=i[0],d=i[1],E=Object(n.useState)(e.permissions),p=Object(G.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)(f[0][$.vs]),N=Object(G.a)(g,2),h=N[0],O=N[1],S=Object(n.useState)(f[0][$.cs]),j=Object(G.a)(S,2),y=j[0],w=j[1],k=Object(n.useState)(f[0][$.us]),_=Object(G.a)(k,2),I=_[0],M=_[1],C=Object(n.useState)(f[0][$.ds]),x=Object(G.a)(C,2),R=x[0],T=x[1],L=Object(n.useState)(f[0][$.vmovies]),P=Object(G.a)(L,2),A=P[0],D=P[1],F=Object(n.useState)(f[0][$.cm]),B=Object(G.a)(F,2),H=B[0],W=B[1],V=Object(n.useState)(f[0][$.um]),Y=Object(G.a)(V,2),K=Y[0],z=Y[1],J=Object(n.useState)(f[0][$.dm]),X=Object(G.a)(J,2),q=X[0],Z=X[1],ee=Object(n.useState)(!1),te=Object(G.a)(ee,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){H&&K&&q&&re(D,!0,$.vmovies),y&&I&&R&&re(O,!0,$.vs)}),[h,y,I,R,A,H,K,q]);var re=function(e,t,a){e(t),f[0][a]=t,v(f)},ce=function(e){e.target.id===$.vs?re(O,e.target.checked,$.vs,h):e.target.id===$.cs?re(w,e.target.checked,$.cs):e.target.id===$.us?re(M,e.target.checked,$.us):e.target.id===$.ds?re(T,e.target.checked,$.ds):e.target.id===$.vmovies?re(D,e.target.checked,$.vmovies):e.target.id===$.cm?re(W,e.target.checked,$.cm):e.target.id===$.um?re(z,e.target.checked,$.um):e.target.id===$.dm&&re(Z,e.target.checked,$.dm)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement("h4",null,"Edit user: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"User Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",value:u,onChange:function(e){return d(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Permissions"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(b.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(b.a.Check,{type:"checkbox",id:$.vs,label:$.vs,checked:h,onChange:function(e){return ce(e)}}),r.a.createElement(b.a.Check,{type:"checkbox",id:$.cs,label:$.cs,checked:y,onChange:function(e){return ce(e)}}),r.a.createElement(b.a.Check,{type:"checkbox",id:$.us,label:$.us,checked:I,onChange:function(e){return ce(e)}}),r.a.createElement(b.a.Check,{type:"checkbox",id:$.ds,label:$.ds,checked:R,onChange:function(e){return ce(e)}}),r.a.createElement(b.a.Check,{type:"checkbox",id:$.vmovies,label:$.vmovies,checked:A,onChange:function(e){return ce(e)}}),r.a.createElement(b.a.Check,{type:"checkbox",id:$.cm,label:$.cm,checked:H,onChange:function(e){return ce(e)}}),r.a.createElement(b.a.Check,{type:"checkbox",id:$.um,label:$.um,checked:K,onChange:function(e){return ce(e)}}),r.a.createElement(b.a.Check,{type:"checkbox",id:$.dm,label:$.dm,checked:q,onChange:function(e){return ce(e)}})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault();var a={displayName:c,id:e.id,email:u,createdAt:e.createdAt};U("users",e.id,a);var n=f[0],r=n.viewSubscriptions,l=n.createSubscriptions,s=n.updateSubscriptions,o=n.deleteSubscriptions,m=n.viewMovies,i=n.createMovies,d=n.updateMovies,b=n.deleteMovies,E={id:e.id,viewSubscriptions:r,createSubscriptions:l,updateSubscriptions:s,deleteSubscriptions:o,viewMovies:m,createMovies:i,updateMovies:d,deleteMovies:b};U("permissions",e.id,E),alert("Details changed successfully"),ne(!0)}(t)}}),r.a.createElement(s.b,{to:"allusers",className:"btn btn-secondary"},"Cancel"),ae?r.a.createElement(o.a,{to:"allusers"}):null)))))))),r.a.createElement(Q,{children:"Go back"}))},Ee=a(40),pe=a(211),fe=a(100),ve=function(e){var t=e.member,a=Object(P.d)((function(e){return e.user.currentUserPermissions})),c=Object(P.d)((function(e){return e.movies.movies})),l=Object(P.d)((function(e){return e.members.moviesByMember})),o=Object(n.useState)([]),m=Object(G.a)(o,2),i=m[0],u=m[1],E=Object(n.useState)([]),p=Object(G.a)(E,2),g=p[0],N=p[1],h=Object(n.useState)(!1),O=Object(G.a)(h,2),S=O[0],j=O[1],y=Object(n.useState)("details"),w=Object(G.a)(y,2),k=w[0],_=w[1],I=Object(n.useState)(!1),M=Object(G.a)(I,2),C=M[0],x=M[1],R=Object(n.useState)(""),A=Object(G.a)(R,2),D=A[0],F=A[1],B=Object(n.useState)(""),H=Object(G.a)(B,2),W=H[0],V=H[1],Y=Object(n.useState)(""),K=Object(G.a)(Y,2),z=K[0],Q=K[1],X=function(){j(!1)},q=function(e,t,a){e.preventDefault(),F(t),Q(a)},ee=function(){var e=Object(v.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("subscriptions",t.id,{movies:a});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(l.length>0){var e=l.filter((function(e){return e.id===t.id}));e.length>0&&u(e[0].movies)}}),[l]),Object(n.useEffect)((function(){if(D&&W){var e={movieId:D,date:W};u([].concat(Object(Ee.a)(i),[e]))}}),[D,W]),Object(n.useEffect)((function(){if(i.length>0){var e=i.filter((function(e){return c.filter((function(t){return t.id===e.movieId})).length>0}));ee(e)}}),[c,i]);var te=function(){var e=c.filter((function(e){return 0===i.filter((function(t){return t.movieId===e.id})).length}));N(e)};return r.a.createElement("div",null,r.a.createElement(pe.a,{bg:"dark"},r.a.createElement(pe.a.Header,{bg:"secondary"},r.a.createElement(d.a,{variant:"tabs",defaultActiveKey:"details",activeKey:k,as:"ul",onSelect:function(e){return _(e)}},r.a.createElement(d.a.Item,{as:"li"},r.a.createElement(d.a.Link,{eventKey:"details",className:"nav nav-tabs btn btn-danger"},"Member Details")),r.a.createElement(d.a.Item,{as:"li"},r.a.createElement(d.a.Link,{eventKey:"watched",className:"nav nav-tabs btn btn-danger"},"Movies watched")))),"details"===k?r.a.createElement("div",null,r.a.createElement(pe.a.Body,null,r.a.createElement(pe.a.Title,null,t.name),r.a.createElement(pe.a.Text,null,"Email: ",t.email,r.a.createElement("br",null),"City: ",t.city)),r.a.createElement(pe.a.Footer,null,a[0][$.us]?r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(s.b,{to:{pathname:"/editmember",state:{member:t}},className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Edit"},r.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))):null,a[0][$.ds]?r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(J.a,{className:"btn btn-danger btn-sm rounded-0",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Delete",onClick:function(e){j(!0)}},r.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))):null,r.a.createElement(Z.a,{show:S,onHide:X},r.a.createElement("div",{className:"card text-white bg-dark mb-3"},r.a.createElement(Z.a.Header,{closeButton:!0},r.a.createElement(Z.a.Title,null,"Delete Member")),r.a.createElement(Z.a.Body,null,"Are you sure you want to delete the member ",t.name,"?"),r.a.createElement(Z.a.Footer,null,r.a.createElement(J.a,{variant:"danger",onClick:function(e){return function(e){e.preventDefault(),X(),T("members",t.id),T("subscriptions",t.id)}(e)}},"Yes"),r.a.createElement(J.a,{variant:"secondary",onClick:X},"No")))))):r.a.createElement("div",null,r.a.createElement(pe.a.Body,null,r.a.createElement(pe.a.Title,null,"Movies watched"),r.a.createElement(pe.a.Text,{as:"ul"},i?i.map((function(e,t){var a="";return c.filter((function(t){return t.id===e.movieId&&(a=t.name),a})),r.a.createElement("li",{key:t},"Movie : ",a," ",r.a.createElement("br",null),"Date: ",e.date)})):null)),r.a.createElement(pe.a.Footer,null,a[0][$.us]?r.a.createElement(J.a,{className:"btn btn-danger",onClick:function(e){!function(e){e.preventDefault(),x(!C),c&&i&&te()}(e)}},"Subscribe to new movie "):null,C?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(fe.a,null,r.a.createElement(fe.a.Toggle,{variant:"secondary",id:"dropdown-basic"},z?"".concat(z):"Movies List"),r.a.createElement(fe.a.Menu,null,g.length>0?g.map((function(e,t){return r.a.createElement(fe.a.Item,{key:t,variant:"warning",className:"btn btn-secondary",onClick:function(t){return q(t,e.id,e.name)}},e.name)})):c.map((function(e,t){return r.a.createElement(fe.a.Item,{key:t,variant:"warning",className:"btn btn-secondary",onClick:function(t){return q(t,e.id,e.name)}},e.name)})))),r.a.createElement(b.a.Group,{controlId:"dw"},r.a.createElement(b.a.Label,null,"Select Date watched:"),r.a.createElement(b.a.Control,{className:"btn btn-secondary",type:"date",name:"dw",placeholder:"Date watched",onChange:function(e){return V(e.target.value)}})),r.a.createElement(J.a,{className:"btn btn-danger",onClick:function(e){if(e.preventDefault(),D&&W){var a=t.id;L("subscriptions",a,{movies:i}),alert("".concat(t.name," member is subscribed to ").concat(z," movie"))}else alert("You must choose movie & date"),F(""),V("")}},"Subscribe")):null))))},ge=function(){var e=Object(P.d)((function(e){return e.members.members})),t=Object(P.c)();return Object(n.useEffect)((function(){O.collection("subscriptions").onSnapshot(function(){var e=Object(v.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=R(a),t({type:ne.SET_MOVIES_BY_MEMBER_FROM_FIREBASE,payload:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Members List: "),r.a.createElement("div",{className:"card-group justify-content-center"},e.map((function(e,t){return r.a.createElement(ve,{key:t,member:e})}))),r.a.createElement(Q,{children:"Go back"}))},Ne=function(){var e=Object(o.h)().state.member,t=Object(n.useState)(e.name),a=Object(G.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(e.email),i=Object(G.a)(m,2),u=i[0],d=i[1],b=Object(n.useState)(e.city),E=Object(G.a)(b,2),p=E[0],f=E[1],v=Object(n.useState)(!1),g=Object(G.a)(v,2),N=g[0],h=g[1];return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"Members"),r.a.createElement("h4",null,"Edit member: ",c),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Member Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:function(e){return l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",value:u,onChange:function(e){return d(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"City"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",value:p,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Save Changes",onClick:function(t){return function(t){t.preventDefault(),U("members",e.id,{name:c,email:u,city:p}),alert("Details changed successfully"),h(!0)}(t)}}),r.a.createElement(s.b,{to:"allmembers",className:"btn btn-secondary"},"Cancel"),N?r.a.createElement(o.a,{to:"allmembers"}):null)))))))),r.a.createElement(Q,{children:"Go back"}))},he=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),m=Object(G.a)(l,2),i=m[0],u=m[1],d=Object(n.useState)(""),b=Object(G.a)(d,2),E=b[0],p=b[1],f=Object(n.useState)(!1),v=Object(G.a)(f,2),g=v[0],N=v[1],h=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"}," Members "),r.a.createElement("div",{className:"container py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto col-sm-6"},r.a.createElement("div",{className:"card bg-dark"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"mb-0"},"Add new member")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"form",autoComplete:"off"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Name"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return c(h(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"Email"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"email",onChange:function(e){return u(h(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"},"City"),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{className:"form-control",type:"text",onChange:function(e){return p(h(e.target.value))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-lg-3 col-form-label form-control-label"}),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("input",{type:"button",className:"btn btn-danger",value:"Add member",onClick:function(e){return function(e){e.preventDefault(),a&&i&&E?(w("members",{name:a,email:i,city:E}),alert("Details saved successfully"),N(!0)):(alert("You muse insert name & email & city"),c(""),u(""),p(""))}(e)}}),r.a.createElement(s.b,{to:"allmembers",className:"btn btn-secondary"},"Cancel"),g?r.a.createElement(o.a,{to:"allmembers"}):null)))))))),r.a.createElement(Q,{children:"Go back"}))};var Oe=Object(P.b)((function(e){return{loggedIn:e.user.loggedIn}}),(function(e){return{setUserLoggenIn:function(t){return e({type:D.LOG_IN_USER,payload:t})},setUserLoginEmailPass:function(t){return e(F(t))}}}))((function(e){var t=e.loggedIn,a=e.setUserLoggenIn,c=e.setUserLoginEmailPass;return Object(n.useEffect)((function(){var e,t,n=(e=a,t=c,h.onAuthStateChanged(function(){var a=Object(v.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n){a.next=9;break}return e(!0),a.next=4,y(n);case 4:a.sent.onSnapshot((function(e){t(Object(E.a)({id:e.id},e.data()))})),console.log("The user is logged in"),a.next=12;break;case 9:e(!1),t(n),console.log("The user is not logged in");case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()));return function(){n()}}),[]),console.log("This is the process.env","/movies-subscriptions"),r.a.createElement("div",{className:"App"},r.a.createElement(A,{loggedIn:t}),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:i}),r.a.createElement(o.b,{path:"/signup",component:V}),r.a.createElement(o.b,{path:"/signupusername",component:Y}),r.a.createElement(o.b,{path:"/mainpage",component:z}),r.a.createElement(o.b,{path:"/signin",component:W}),r.a.createElement(o.b,{path:"/manageusers",component:X}),r.a.createElement(o.b,{path:"/allusers",component:ue}),r.a.createElement(o.b,{path:"/addusername",component:de}),r.a.createElement(o.b,{path:"/edituser",component:be}),r.a.createElement(o.b,{path:"/movies",component:ae}),r.a.createElement(o.b,{path:"/allmovies",component:te}),r.a.createElement(o.b,{path:"/editmovie",component:oe}),r.a.createElement(o.b,{path:"/addmovie",component:se}),r.a.createElement(o.b,{path:"/subscriptions",component:re}),r.a.createElement(o.b,{path:"/allmembers",component:ge}),r.a.createElement(o.b,{path:"/editmember",component:Ne}),r.a.createElement(o.b,{path:"/addmember",component:he}),r.a.createElement(o.b,{component:m})),t?r.a.createElement(o.a,{from:"/signin",to:"/mainpage"}):r.a.createElement(o.a,{to:"/"}))})),Se=a(33),je=(a(199),{currentUser:null,currentUserPermissions:[],loggedIn:!1,error:null,users:[],usersPermissions:[],usersLoginList:[]}),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.LOG_IN_USER:return Object(E.a)(Object(E.a)({},e),{},{loggedIn:t.payload});case D.SET_EMAIL_PASS_LOG_IN:return Object(E.a)(Object(E.a)({},e),{},{currentUser:t.payload});case D.GET_USERS_LIST:return Object(E.a)(Object(E.a)({},e),{},{users:t.payload});case D.GET_PERMISSIONS_USERS:return Object(E.a)(Object(E.a)({},e),{},{usersPermissions:t.payload});case D.SET_USERS_WITH_PERMISSIONS:return Object(E.a)(Object(E.a)({},e),{},{users:t.payload});case D.GET_USERS_LOGIN_LIST:return Object(E.a)(Object(E.a)({},e),{},{usersLoginList:t.payload});case D.GET_CURRENT_USER_PERMISSIONS:return Object(E.a)(Object(E.a)({},e),{},{currentUserPermissions:t.payload});default:return e}},we={movies:[]},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.SET_MOVIES_FROM_FIRE_STORE:return Object(E.a)(Object(E.a)({},e),{},{movies:t.payload});case K.ADD_MOVIE:return Object(E.a)(Object(E.a)({},e),{},{movies:[].concat(Object(Ee.a)(e.movies),[t.payload])});default:return e}},_e={members:[],moviesByMember:[]},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne.SET_MEMBERS_FROM_FIREBASE:return Object(E.a)(Object(E.a)({},e),{},{members:t.payload});case ne.SET_MOVIES_BY_MEMBER_FROM_FIREBASE:return Object(E.a)(Object(E.a)({},e),{},{moviesByMember:t.payload});default:return e}},Me=Object(Se.c)({user:ye,movies:ke,members:Ie});var Ce=Object(Se.d)(Me,Se.a.apply(void 0,Object(Ee.a)([])));l.a.render(r.a.createElement(P.a,{store:Ce},r.a.createElement(s.a,{basename:"/movies-subscriptions"},r.a.createElement(Oe,null))),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.69919920.chunk.js.map